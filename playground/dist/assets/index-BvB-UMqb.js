/* empty css            */import{S as SafeJsonParse,a as adminConfig,g as axios$1,H as Humanize,T as Toast,E as EventBus,b as Sortable,F as Form,P as PasteFromClipboard,I as IsJson,c as SecureLS,L as Loader,M as Modal,d as SafeErrorData,e as Store,p as pluralize,Q as QueryBuilder,h as Fx,C as CopyToClipboard,f as LeftMenu,i as MapAPI,j as ErrorMessage,k as PageManager,l as EditorHelper,D as Dashboard,m as common,A as AdminConfig}from"./error-message-handler-A8_HKZJi.js";import{n as Je,o as Oe,q as qe,r as Re,U as ze}from"./error-message-handler-A8_HKZJi.js";import{r as ref,o as onMounted,a as onBeforeUnmount,b as openBlock,c as createElementBlock,d as createBaseVNode,t as toDisplayString,n as normalizeClass,F as Fragment,h as renderList,A as normalizeStyle,k as computed,l as createBlock,w as withCtx,i as createTextVNode,j as createCommentVNode,g as withDirectives,m as vModelSelect,p as vModelDynamic,q as withModifiers,B as reactive,f as createVNode,s as getCurrentInstance,e as renderSlot,v as vShow,x as vModelCheckbox,y as vModelText,C as nextTick,D as withKeys,I as watch,z as createStaticVNode}from"./index-Blyshef0.js";import{_ as _export_sfc}from"./_plugin-vue_export-helper-DlAUqK2U.js";const _hoisted_1$w={class:"dropdown"},_hoisted_2$r=["onClick"],_sfc_main$C={__name:"split-button",props:["dataOptions","dataSelected","dataParser","dataOnChange","dataBtnCss"],emits:["change"],setup(__props,{expose:__expose,emit:__emit}){const props=__props,emit=__emit,dropdownMenu=ref(null),display=ref(""),formatter=ref(props.dataParser),lists=ref(SafeJsonParse(props.dataOptions,[])),current=ref({}),selectedIndex=ref(props.dataSelected===void 0?0:parseInt(props.dataSelected)),btnCss=ref(props.dataBtnCss||""),onChange=computed(()=>{const method=props.dataOnChange===void 0?null:props.dataOnChange;if(typeof method=="string")try{return eval(method)}catch(w){return console.error("SplitButton: Error evaluating onChange method",w),null}return method}),isActive=w=>current.value.value===w.value?"dropdown-item active hand":"dropdown-item hand",normalizeData=()=>{const w=formatter.value,e=[];lists.value.forEach((o,r)=>{typeof w=="function"?e.push(w(o)):e.push({label:o,value:o})}),lists.value=e,current.value=lists.value[selectedIndex.value]||{}},mangeShowHide=w=>{const e=dropdownMenu.value,o=w.target;e&&e!==o&&!e.contains(o)&&(display.value="",unBindDocumentClick())},bindDocumentClick=()=>{document.addEventListener("mouseup",mangeShowHide)},unBindDocumentClick=()=>{document.removeEventListener("mouseup",mangeShowHide)},toggleMenu=()=>{display.value=display.value===""?"display:block":"",display.value!==""&&bindDocumentClick()},setCurrent=w=>{current.value=lists.value[w],current.value.index=w,onChange.value!=null&&typeof onChange.value=="function"&&onChange.value(current.value),emit("change",current.value)},setData=w=>{lists.value=w,normalizeData()};return __expose({setData}),onMounted(()=>{normalizeData()}),onBeforeUnmount(()=>{unBindDocumentClick()}),(w,e)=>(openBlock(),createElementBlock("div",_hoisted_1$w,[createBaseVNode("a",{class:normalizeClass("btn btn-secondary dropdown-toggle "+btnCss.value),href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:e[0]||(e[0]=o=>toggleMenu())},toDisplayString(current.value.label),3),createBaseVNode("ul",{class:"dropdown-menu shadow",style:normalizeStyle(display.value),ref_key:"dropdownMenu",ref:dropdownMenu},[(openBlock(!0),createElementBlock(Fragment,null,renderList(lists.value,(o,r)=>(openBlock(),createElementBlock("li",{class:normalizeClass(isActive(o)),onClick:i=>setCurrent(r)},toDisplayString(o.label),11,_hoisted_2$r))),256))],4)]))}},_sfc_main$B={__name:"cms-module-dropdown",props:["dataModules","dataCurrentModule"],setup(w){const e=w,o=ref(SafeJsonParse(e.dataModules,[])),r=ref(e.dataCurrentModule===void 0?"":e.dataCurrentModule),i=computed(()=>{const v=[...o.value.child||[]];return v.splice(0,0,{name:o.value.name,controller_name:o.value.controller_name}),v}),$=computed(()=>{if(i.value.length>0){for(let v=0;v<i.value.length;v++)if(i.value[v].controller_name.toLowerCase()===r.value.toLowerCase())return v}return 0}),u=()=>o.value.parent_id==0&&i.value.length>1,p=v=>({label:v.name,value:v.controller_name}),n=v=>{const S=adminConfig.admin_path(v.value);window.location=S};return(v,S)=>u()?(openBlock(),createBlock(_sfc_main$C,{key:0,"data-options":i.value,onChange:n,"data-parser":p,"data-selected":$.value,"data-btn-css":"btn-success"},{default:withCtx(()=>[createTextVNode(toDisplayString(r.value),1)]),_:1},8,["data-options","data-selected"])):createCommentVNode("",!0)}},_sfc_main$A={__name:"language-button",props:["dataLanguages","dataSelectedLanguage"],setup(w){const e=w,o=ref(SafeJsonParse(e.dataLanguages,null)),r=ref(e.dataSelectedLanguage===void 0?1:parseInt(e.dataSelectedLanguage)),i=computed(()=>{if(o.value!=null){for(let n=0;n<o.value.length;n++)if(o.value[n].id==r.value)return n}return 0}),$=()=>o.value!=null&&o.value.length>1,u=n=>({label:n.name,value:n.id}),p=n=>{const v=adminConfig.admin_path(`ajax/setLanguage/${n.value}`);axios$1.get(v).then(()=>{window.location.reload()}).catch(S=>{console.error(S)})};return(n,v)=>$()?(openBlock(),createBlock(_sfc_main$C,{key:0,"data-options":w.dataLanguages,onChange:p,"data-parser":u,"data-selected":i.value,"data-btn-css":"lang"},{default:withCtx(()=>[...v[0]||(v[0]=[createTextVNode("English",-1)])]),_:1},8,["data-options","data-selected"])):createCommentVNode("",!0)}},_hoisted_1$v=["action"],_hoisted_2$q={class:"row searchForm justify-content-end"},_hoisted_3$o={class:"col-auto space-between"},_hoisted_4$m={class:"form-group"},_hoisted_5$k=["value"],_hoisted_6$j={class:"col-auto space-between"},_hoisted_7$i=["value"],_hoisted_8$g={class:"col-auto space-between"},_hoisted_9$f=["type"],_hoisted_10$d={class:"col-auto space-between"},_hoisted_11$b={class:"input-group-btn"},_sfc_main$z={__name:"search-bar",props:["dataSelectedParams","dataControllerName","dataFields","dataActionFields"],setup(w){const e=w,o={q:"",f:"id",o:"="},r=reactive({q:"",f:"id",o:"="}),i=ref(adminConfig.admin_path(`${e.dataControllerName}/search`)),$=ref(SafeJsonParse(e.dataFields,[])),u=["=","!=",">","<",">=","<=","like%","%like%"],p=ref(SafeJsonParse(e.dataActionFields,[]).length>0),n=ref("text"),v=(k,l="label")=>typeof k=="string"||k[l]===void 0?k:k[l],S=()=>{r.f.endsWith("_date")||r.f.endsWith("_at")?n.value="date":n.value="text"},a=()=>{let k;if(r.q.trim()==="")k=adminConfig.admin_path(e.dataControllerName);else{const l=encodeURI(JSON.stringify(r)),f=i.value.indexOf("?")===-1?"?":"&";k=`${i.value}${f}q=${l}`}return window.location.href=k,!1},g=()=>{const k=adminConfig.admin_path(e.dataControllerName);window.location.href=k},h=()=>{p.value&&$.value.pop();const k=SafeJsonParse(e.dataSelectedParams,o);k.f===void 0?Object.assign(r,o):Object.assign(r,k),S()};return onMounted(()=>{h()}),(k,l)=>(openBlock(),createElementBlock("form",{action:i.value,method:"get",onSubmit:withModifiers(a,["prevent"]),class:"form-inline",role:"form"},[createBaseVNode("div",_hoisted_2$q,[createBaseVNode("div",_hoisted_3$o,[createBaseVNode("div",_hoisted_4$m,[withDirectives(createBaseVNode("select",{name:"fields","onUpdate:modelValue":l[0]||(l[0]=f=>r.f=f),class:"form-select",onChange:l[1]||(l[1]=f=>S())},[(openBlock(!0),createElementBlock(Fragment,null,renderList($.value,f=>(openBlock(),createElementBlock("option",{value:v(f,"key")},toDisplayString(v(f)),9,_hoisted_5$k))),256))],544),[[vModelSelect,r.f]])])]),createBaseVNode("div",_hoisted_6$j,[withDirectives(createBaseVNode("select",{name:"fields","onUpdate:modelValue":l[2]||(l[2]=f=>r.o=f),class:"form-select"},[(openBlock(),createElementBlock(Fragment,null,renderList(u,f=>createBaseVNode("option",{value:f},toDisplayString(f),9,_hoisted_7$i)),64))],512),[[vModelSelect,r.o]])]),createBaseVNode("div",_hoisted_8$g,[withDirectives(createBaseVNode("input",{type:n.value,"onUpdate:modelValue":l[3]||(l[3]=f=>r.q=f),class:"form-control",placeholder:"Search for..."},null,8,_hoisted_9$f),[[vModelDynamic,r.q]])]),createBaseVNode("div",_hoisted_10$d,[createBaseVNode("span",_hoisted_11$b,[l[5]||(l[5]=createBaseVNode("input",{type:"submit",name:"submit",value:"Search",class:"btn btn-success space-between btn-space"},null,-1)),createBaseVNode("input",{type:"reset",name:"reset",onClick:l[4]||(l[4]=f=>g()),value:"Reset",class:"btn btn-outline-secondary btn-space"})])])])],40,_hoisted_1$v))}},_hoisted_1$u={class:"container-fluid border-bottom mb-2 pb-2"},_hoisted_2$p={class:"row"},_hoisted_3$n={class:"col"},_hoisted_4$l={class:"btn-toolbar justify-content-between",role:"toolbar","aria-label":"Toolbar with button groups"},_hoisted_5$j={class:"btn-group",role:"group"},_hoisted_6$i={class:"moduleTitle"},_hoisted_7$h={class:"input-group actionToolbar"},_hoisted_8$f=["href","title"],_hoisted_9$e={key:1},_hoisted_10$c=["href"],_hoisted_11$a={class:"row"},_hoisted_12$8={key:0,class:"col"},_sfc_main$y={__name:"action-bar",props:["dataSelectedParams","dataControllerName","dataControllerTitle","dataFields","dataActionFields","dataLanguages","dataSelectedLanguage","dataMoreActions","dataShowAdd","dataHasLangMethod","dataCmsModules","dataShowSearch","dataShowBack","dataLayoutType"],setup(w){const e=w,o=getCurrentInstance(),r=ref(!(typeof e.dataShowSearch>"u"||e.dataShowSearch===""||e.dataShowSearch==="false")),i=ref(!1),$=ref("btn btn-outline-secondary"),u=ref(""),p=ref(SafeJsonParse(e.dataMoreActions,[])),n=ref(typeof e.dataShowAdd>"u"||e.dataShowAdd==="true"),v=ref(!(typeof e.dataHasLangMethod>"u"||e.dataHasLangMethod==="false"));ref(SafeJsonParse(e.dataCmsModules,{}));const S=ref(typeof e.dataSelectedParams>"u"?"":e.dataSelectedParams),a=ref(typeof e.dataControllerName>"u"?"":e.dataControllerName),g=ref(typeof e.dataControllerTitle>"u"?"":e.dataControllerTitle),h=ref(typeof e.dataFields>"u"||e.dataFields===""?[]:e.dataFields),k=ref(typeof e.dataActionFields>"u"||e.dataActionFields===""?[]:e.dataActionFields),l=ref(e.dataShowBack==="true"),f=ref(typeof e.dataLayoutType>"u"||e.dataLayoutType===""?"table":e.dataLayoutType),D=computed(()=>adminConfig.admin_path(a.value)),F=computed(()=>f.value==="grid"?"fa fa-th-list":"fa fa-table"),N=computed(()=>k.value.indexOf("edit")!==-1),C=(j=!0)=>{$.value=i.value===!0?"btn btn-success":"btn btn-outline-secondary",u.value=i.value===!0&&j===!0?"animated flipInX":""},M=()=>{i.value=!i.value,C()},L=()=>{S.value!==""&&(SafeJsonParse(S.value,{}).q&&(i.value=!0),C(!1))},V=()=>{if(Toast.show(o,"Please wait. Changing listing style for you...",5e3),f.value=f.value==="table"?"grid":"table","URLSearchParams"in window){let j=new URLSearchParams(window.location.search);j.set("layout",f.value),window.location.search=j.toString()}},E=j=>j.indexOf("http")===0?j:adminConfig.admin_path(j),b=()=>{if(a.value!==""){const j=adminConfig.admin_path(a.value);window.location.href=`${j}/create`}},s=j=>!j.as||j.as==="button"?"button":j.as,y=j=>Humanize(j);return onMounted(()=>{L()}),(j,O)=>(openBlock(),createElementBlock("div",_hoisted_1$u,[createBaseVNode("div",_hoisted_2$p,[createBaseVNode("div",_hoisted_3$n,[createBaseVNode("div",_hoisted_4$l,[createBaseVNode("div",_hoisted_5$j,[createBaseVNode("h4",_hoisted_6$i,toDisplayString(y(g.value)),1)]),createBaseVNode("div",_hoisted_7$h,[v.value?(openBlock(),createBlock(_sfc_main$A,{key:0,"data-languages":w.dataLanguages,"data-selected-language":w.dataSelectedLanguage},{default:withCtx(()=>[...O[1]||(O[1]=[createTextVNode("English",-1)])]),_:1},8,["data-languages","data-selected-language"])):createCommentVNode("",!0),n.value&&N.value?(openBlock(),createElementBlock("button",{key:1,title:"Add New",onClick:b,type:"button",class:"btn btn-outline-secondary","aria-label":"Add New"},[...O[2]||(O[2]=[createBaseVNode("i",{class:"fa fa-plus","aria-hidden":"true"},null,-1),createTextVNode(" Add New ",-1)])])):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(p.value,G=>(openBlock(),createElementBlock("a",{class:"btn btn-outline-secondary",href:E(G.action),title:G.label},[G.icon_css?(openBlock(),createElementBlock("i",{key:0,class:normalizeClass(G.icon_css),"aria-hidden":"true"},null,2)):createCommentVNode("",!0),s(G)=="button"?(openBlock(),createElementBlock("span",_hoisted_9$e,toDisplayString(G.label),1)):createCommentVNode("",!0)],8,_hoisted_8$f))),256)),r.value?(openBlock(),createElementBlock("button",{key:2,title:"Search",onClick:M,type:"button",class:normalizeClass($.value),"aria-label":"Search"},[...O[3]||(O[3]=[createBaseVNode("i",{class:"fa fa-search","aria-hidden":"true"},null,-1)])],2)):createCommentVNode("",!0),h.value.length>0?(openBlock(),createElementBlock("button",{key:3,title:"Change Layout",onClick:O[0]||(O[0]=G=>V()),type:"button",class:"btn btn-outline-secondary","aria-label":"Layout"},[createBaseVNode("i",{class:normalizeClass(F.value),"aria-hidden":"true"},null,2)])):createCommentVNode("",!0),l.value?(openBlock(),createElementBlock("a",{key:4,class:"btn btn-outline-secondary",href:D.value},"Back",8,_hoisted_10$c)):createCommentVNode("",!0)])])])]),createBaseVNode("div",_hoisted_11$a,[i.value?(openBlock(),createElementBlock("div",_hoisted_12$8,[createVNode(_sfc_main$z,{class:normalizeClass(u.value),"data-controller-name":a.value,"data-selected-params":S.value,"data-fields":h.value,"data-action-fields":k.value},null,8,["class","data-controller-name","data-selected-params","data-fields","data-action-fields"])])):createCommentVNode("",!0)])]))}},_hoisted_1$t={class:"modal-content"},_hoisted_2$o={class:"modal-title",style:{width:"100%"}},_sfc_main$x={__name:"modal-box",props:["dataShowModal","dataShowFooter","dataTitleCss","dataContentCss","dataFooterCss","dataModalCss","dataWidth"],emits:["onClose"],setup(w,{expose:e,emit:o}){const r=w,i=o,$=ref("modal modal-lg fade show"),u=ref(r.dataTitleCss||""),p=ref(r.dataContentCss||""),n=ref(r.dataFooterCss||""),v=ref(r.dataShowModal?.toString()==="true"),S=ref(""),a=ref({}),g=ref("Alert"),h=ref("Modal Content"),k=ref(""),l=ref("display:none"),f=computed(()=>r.dataShowFooter?.toString()==="true"||k.value!==""),D=computed(()=>r.dataWidth&&r.dataWidth!==""?`width:${r.dataWidth}`:""),F=(V={})=>{v.value=!0,l.value=S.value="display:block",$.value="modal modal-lg fade show animated bounceInDown",a.value=V},N=()=>{v.value=!1,$.value="modal modal-lg animated bounceOutUp",l.value="display:none",typeof a.value=="function"&&a.value()},C=V=>{N(),i("onClose",V,a.value)};return e({open:F,close:N,sendData:C,show:(V,E,b,s)=>{typeof V=="string"?h.value=V:(V.title&&(g.value=V.title),V.content&&(h.value=V.content),V.footerContent&&(k.value=V.footerContent)),F(b)},hide:()=>{N()}}),onMounted(()=>{v.value&&F()}),(V,E)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",{class:normalizeClass($.value),tabindex:"-1","aria-hidden":"true",style:normalizeStyle(S.value)},[createBaseVNode("div",{class:normalizeClass("modal-dialog modal-dialog-centered modal-dialog-scrollable "+w.dataModalCss),style:normalizeStyle(D.value)},[createBaseVNode("div",_hoisted_1$t,[createBaseVNode("div",{class:normalizeClass(u.value+" modal-header")},[createBaseVNode("h5",_hoisted_2$o,[renderSlot(V.$slots,"title",{},()=>[createTextVNode(toDisplayString(g.value),1)])]),createBaseVNode("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:E[0]||(E[0]=b=>C(0))})],2),createBaseVNode("div",{class:normalizeClass(p.value+" modal-body")},[renderSlot(V.$slots,"content",{},()=>[createTextVNode(toDisplayString(h.value),1)])],2),withDirectives(createBaseVNode("div",{class:normalizeClass(n.value+" modal-footer")},[renderSlot(V.$slots,"footer",{},()=>[createTextVNode(toDisplayString(k.value),1)])],2),[[vShow,f.value]])])],6)],6),createBaseVNode("div",{class:"modal-backdrop fade show",style:normalizeStyle(l.value)},null,4)],64))}},_hoisted_1$s={class:"row"},_hoisted_2$n={class:"col-auto"},_hoisted_3$m=["value"],_hoisted_4$k={class:"col-auto"},_sfc_main$w={__name:"category-platform",props:["dataPlatforms"],setup(w){const e=w,o=getCurrentInstance(),r=ref(null),i=ref(SafeJsonParse(e.dataPlatforms,[])),$=ref(""),u=ref(null),p=()=>{i.value.length>1?r.value&&r.value.open():i.value.length===1&&($.value=i.value[0].id,n())},n=()=>{const a=$.value;if(a==="")return Toast.show(o,"Please select a platform"),!1;const h=u.value.getAttribute("data-rowid");window.location=adminConfig.admin_path(`category/edit/${h}/${a}`)},v=()=>{EventBus.emit("list-view-hide-spinner")},S=a=>{u.value=a,p()};return onMounted(()=>{EventBus.on("list-view-pre-edit",S)}),onBeforeUnmount(()=>{EventBus.off("list-view-pre-edit",S)}),(a,g)=>(openBlock(),createElementBlock("div",null,[createVNode(_sfc_main$x,{ref_key:"platformbox",ref:r,onOnClose:v},{title:withCtx(()=>[...g[3]||(g[3]=[createTextVNode(" Select Platform ",-1)])]),content:withCtx(()=>[createBaseVNode("div",_hoisted_1$s,[createBaseVNode("div",_hoisted_2$n,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":g[0]||(g[0]=h=>$.value=h),class:"form-select select-medium",onChange:g[1]||(g[1]=h=>n())},[g[4]||(g[4]=createBaseVNode("option",{value:""},"Select a platform",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(i.value,h=>(openBlock(),createElementBlock("option",{value:h.id},toDisplayString(h.name),9,_hoisted_3$m))),256))],544),[[vModelSelect,$.value]])]),createBaseVNode("div",_hoisted_4$k,[createBaseVNode("button",{class:"btn btn-success btn-from-submit",type:"button",onClick:g[2]||(g[2]=h=>n())}," Edit Now ")])])]),_:1},512)]))}},_hoisted_1$r={class:"row"},_hoisted_2$m={class:"col-auto"},_hoisted_3$l=["value"],_hoisted_4$j={class:"col-auto"},_hoisted_5$i=["value"],_hoisted_6$h={class:"col-auto"},_hoisted_7$g={title:"It will be inserted or deleted for all platforms if checks."},_hoisted_8$e={key:0,class:"row mt-3"},_hoisted_9$d={class:"row mt-3"},_hoisted_10$b={class:"col-4"},_hoisted_11$9={class:"panel panel-success shadow border"},_hoisted_12$7={class:"panel-heading p-4"},_hoisted_13$7={key:0,class:"panel-body p-3",style:{"background-color":"#f3f3f3"}},_hoisted_14$6=["value"],_hoisted_15$6={key:1,class:"panel-sub-heading",style:{padding:"4px"}},_hoisted_16$6={class:"input-group"},_hoisted_17$6=["data-cache-category","data-category-id","data-theme-id"],_hoisted_18$5=["onUpdate:modelValue"],_hoisted_19$5={class:"text-danger"},_hoisted_20$5={class:"btn-toolbar pull-right toolbar-category",role:"toolbar"},_hoisted_21$5={class:"btn-group"},_hoisted_22$5={key:0,"aria-label":"Delete from this platform",class:"btn btn-default icon-btn js_delete",title:"Delete from this platform",type:"button"},_hoisted_23$5={key:1,"aria-label":"More Info",class:"btn btn-default js_info icon-btn",title:"More Info",type:"button"},_hoisted_24$5={class:"col-3"},_hoisted_25$5={class:"panel panel-info margin-top-20"},_hoisted_26$5={key:0,class:"panel-sub-heading",style:{padding:"4px"}},_hoisted_27$5={class:"input-group"},_hoisted_28$4={id:"draggableItems",class:"list-group"},_hoisted_29$3=["data-category-id"],_hoisted_30$3={class:"popover-header"},_hoisted_31$3={class:"popover-body"},_hoisted_32$3=["value"],_hoisted_33$3={class:"text-center"},_sfc_main$v={__name:"category-settings",props:["dataSiteId","dataSitePlatforms","dataSiteCategories","dataSiteThemes","dataSiteMicrosites","dataPlatformId","dataMicrositeId","dataCategories","dataUserRights"],setup(w){const e=w,o=getCurrentInstance(),r=ref(null),i=ref(null),$=ref(!1),u=ref(SafeJsonParse(e.dataSitePlatforms,[])),p=ref(SafeJsonParse(e.dataSiteCategories,[])),n=ref(SafeJsonParse(e.dataSiteThemes,[])),v=ref(SafeJsonParse(e.dataSiteMicrosites,[])),S=ref(SafeJsonParse(e.dataCategories,[])),a=ref(typeof e.dataPlatformId>"u"||e.dataPlatformId===""?1:parseInt(e.dataPlatformId)),g=ref(typeof e.dataMicrositeId>"u"||e.dataMicrositeId===""?0:parseInt(e.dataMicrositeId)),h=ref(""),k=ref(""),l=ref(!1),f=ref(0),D=reactive({category_id:0,theme_id:"",cache_category:""}),F=ref([]),N=reactive({}),C=ref([]),M=ref(typeof e.dataSiteId>"u"?1:parseInt(e.dataSiteId)),L=ref(!0),V=ref(!1),E=ref(""),b=ref(SafeJsonParse(e.dataUserRights,[])),s=computed(()=>u.value.length>1),y=computed(()=>v.value.length>0),j=computed(()=>b.value.indexOf("edit")>=0),O=computed(()=>b.value.indexOf("delete")>=0),G=d=>{for(let t=0;t<n.value.length;t++)if(n.value[t].id==d)return n.value[t].name;return""},R=()=>({microsite_id:g.value,platform_id:a.value,category_id:f.value,site_id:M.value}),K=(d,t)=>new Promise((m,P)=>{axios.post(d,t).then(A=>m(A)).catch(A=>P(A.response))}),X=(d,t="allSiteCategories")=>{let m=null;const P=t==="allSiteCategories"?C.value:F.value;for(let A=0;A<P.length;A++){const H=P[A];if(parseInt(H.category_id)===parseInt(d)){m=H;break}}return m},Q=(d,t="allCategories")=>{let m=-1;const P=t==="allCategories"?F.value:C.value;if(P.length>0)for(let A=0;A<P.length;A++){const H=P[A];if(parseInt(H.category_id)===parseInt(d)){m=A;break}}return m},re=()=>{const d=document.querySelectorAll(".js_category li"),t=a.value,m=[];for(let P=0;P<d.length;P++){const A=d[P],H=X(A.getAttribute("data-category-id"),"allCategories"),q={position:P+1},z={category_id:H.category_id,platform_id:t};m.push({where:z,data:q})}if(m.length>0){const P=adminConfig.admin_path("category/updateIndex");K(P,{data:m}).then(()=>{Toast.show(o,"Saved...")}).catch(H=>{Toast.show(o,H.data.message,2e3)})}},le=()=>{i.value&&i.value.classList.add("animated","fadeOut","hide")},oe=(d,t,m="center-right")=>{t.classList.remove("animated","fadeOut","hide");const P=d.getBoundingClientRect(),A=t.getBoundingClientRect(),H=P.left+P.width,q=P.top+P.height-A.height/2;t.classList.add("animated","jello"),m==="center-right"&&(t.style.position="absolute",t.style.left=H+"px",t.style.top=q+"px")},U=d=>{const t=d.currentTarget,m=d.target,P=t.getAttribute("data-category-id"),A=t.getAttribute("data-theme-id"),H=X(P,"allCategories");D.theme_id=A,D.category_id=P,D.cache_category=H.cache_category,m.classList.contains("js_info")&&oe(t,i.value)},B=()=>{const d=R();delete d.category_id,d.microsite_id===0&&delete d.microsite_id;const t="category/settings";window.location.href=adminConfig.admin_path(t,d)},x=(d="add")=>{document.querySelectorAll(".js_category").forEach(m=>{m.classList[d]("module-drop-eager")})},W=d=>{const t=Q(d);if(t!==-1){const m=F.value.splice(t,1)[0],P=adminConfig.admin_path("category/deleteCategory"),A=R(),H={where:{category_id:m.category_id,microsite_id:A.microsite_id}};return l.value||(H.where.platform_id=A.platform_id),K(P,H).then(()=>{Toast.show(o,"Saved...")}).catch(q=>{Toast.show(o,q.data.message,2e3)}),[m]}},Y=d=>{const t=Q(d.category_id);let m=!1;if(t===-1){const P=d.category_id.toString();N[P]={index:t,info:d},setTimeout(()=>{const H=adminConfig.admin_path("category/insertCategory"),q=R(),z={},ee={...d};delete ee.name,ee.platform_id=q.platform_id,z.data={category_id:ee.category_id,platform_id:q.platform_id,site_id:q.site_id},z.applicableForAllPlatforms=l.value,K(H,z).then(()=>{Toast.show(o,"Saved...")}).catch(ae=>{Toast.show(o,ae.data.message,2e3)})},1),m=F.value.push(d)}return m},se=()=>{nextTick(()=>{document.querySelectorAll(".js_category").forEach(m=>{Sortable.create(m,{animation:200,filter:".js_delete",group:{name:"droppable",put:"modulesBox"},onFilter:P=>{const A=P.item,H=P.target,q=A.getAttribute("data-category-id");Sortable.utils.is(H,".js_delete")&&W(q)},onUpdate:()=>{re()}})});const t=document.getElementById("draggableItems");t&&Sortable.create(t,{animation:200,draggable:".js_item",group:{name:"modulesBox",pull:"clone",revertClone:!0},sort:!1,ghostClass:".js_category",onEnd:m=>{const P=m.item,A=P.getAttribute("data-category-id");if(A){const H=X(A,"allSiteCategories");let q;H!==null&&(q=Y(H)),P.parentNode.removeChild(P),x("remove"),q===!1&&Toast.show(o,"Category is already added in this platform...")}},onStart:()=>{x("add")}})})},ue=()=>{S.value.length>0&&S.value.forEach(d=>{const t={category_id:d.category_id,category_name:d.lang.name||d.category_name,theme_id:d.theme_id,cache_category:d.cache_category,selected:!1};F.value.push(t),N[d.category_id.toString()]=t}),p.value.length>0&&p.value.forEach(d=>{const t={category_id:d.category_id,category_name:d.name,theme_id:"",cache_category:"",selected:!1};C.value.push(t)})},_e=(d="allCategories",t)=>{const m=d==="allCategories"?F.value:C.value,P=t.checked;m.forEach(A=>{A.selected=P})},de=(d="allCategories")=>(d==="allCategories"?F.value:C.value).length>10,me=(d="allCategories")=>{let t=d==="allCategories"?h.value:k.value;const m=d==="allCategories"?F.value:C.value;return t!==""&&t!=null?(t=t.toLowerCase(),m.filter(P=>{const A=P.category_name.toLowerCase();return P.category_id.toString()===t.toString()||A.includes(t)})):m},pe=()=>{const d=D,t=Q(d.category_id);if(t!==-1){F.value[t].theme_id=d.theme_id,F.value[t].cache_category=d.cache_category,f.value=parseInt(d.category_id);const m={where:R(),data:{cache_category:d.cache_category||"",theme_id:d.theme_id},applicableForAllPlatforms:l.value},P=adminConfig.admin_path("category/updateThemeAndEtc");K(P,m).then(()=>{Toast.show(o,"Saved...")}).catch(A=>{Toast.show(o,A.data.message,2e3)})}le()},fe=()=>{const d=adminConfig.admin_path("category/updateThemeForAllCategories"),t=me("allCategories");if(E.value!==""&&t.length>0){const m=R();delete m.category_id,delete m.microsite_id;const P={data:{theme_id:E.value},where:m};Toast.show(o,"Please wait..."),K(d,P).then(A=>{A.data.error?Toast.show(o,A.data.message,5e3):(Toast.show(o,"Saved"),t.forEach(H=>{H.theme_id=E.value}))}).catch(A=>{Toast.show(o,A.data.message,2e3)})}},T=()=>{ue(),j.value&&se()};return onMounted(()=>{T()}),(d,t)=>(openBlock(),createElementBlock("div",null,[withDirectives(createBaseVNode("div",_hoisted_1$r,[withDirectives(createBaseVNode("div",_hoisted_2$m,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":t[0]||(t[0]=m=>g.value=m),class:"form-select select",onChange:t[1]||(t[1]=m=>B())},[t[16]||(t[16]=createBaseVNode("option",{value:"0"},"Select a MicroSite",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(v.value,m=>(openBlock(),createElementBlock("option",{value:m.id},toDisplayString(m.name),9,_hoisted_3$l))),256))],544),[[vModelSelect,g.value]])],512),[[vShow,y.value]]),createBaseVNode("div",_hoisted_4$j,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":t[2]||(t[2]=m=>a.value=m),class:"form-select select",onChange:t[3]||(t[3]=m=>B())},[t[17]||(t[17]=createBaseVNode("option",null,"Select a Platform",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(u.value,m=>(openBlock(),createElementBlock("option",{value:m.id},toDisplayString(m.name),9,_hoisted_5$i))),256))],544),[[vShow,s.value],[vModelSelect,a.value]])]),createBaseVNode("div",_hoisted_6$h,[withDirectives(createBaseVNode("label",_hoisted_7$g,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":t[4]||(t[4]=m=>l.value=m),name:"applicableForAll",type:"checkbox"},null,512),[[vModelCheckbox,l.value]]),t[18]||(t[18]=createTextVNode(" Enable add/delete for all platforms",-1))],512),[[vShow,s.value]])])],512),[[vShow,y.value||s.value||s.value]]),j.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_8$e,[...t[19]||(t[19]=[createBaseVNode("div",{class:"col-auto"},[createBaseVNode("p",{class:"alert alert-warning"},"You have read only access.")],-1)])])),createBaseVNode("div",_hoisted_9$d,[createBaseVNode("div",_hoisted_10$b,[createBaseVNode("div",_hoisted_11$9,[createBaseVNode("div",_hoisted_12$7,[createBaseVNode("input",{class:"hide",type:"checkbox",onClick:t[5]||(t[5]=m=>_e("allCategories",m.target))}),t[21]||(t[21]=createTextVNode(" Drop in below panel to enable the category for this site. ",-1)),L.value?(openBlock(),createElementBlock("button",{key:0,"aria-label":"More Info",class:"btn btn-default js_info icon-btn pull-right",style:{top:"-7px",position:"relative",right:"-9px"},title:"Update in all categories",type:"button",onClick:t[6]||(t[6]=m=>V.value=!V.value)},[...t[20]||(t[20]=[createBaseVNode("i",{"aria-hidden":"true",class:"fa fa-ellipsis-v js_info"},null,-1)])])):createCommentVNode("",!0)]),V.value?(openBlock(),createElementBlock("div",_hoisted_13$7,[t[23]||(t[23]=createBaseVNode("p",{class:"text-danger"}," Be careful while using this. Changing this dropdown will effect to all categories. ",-1)),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":t[7]||(t[7]=m=>E.value=m),class:"form-select margin-bottom-05",onChange:t[8]||(t[8]=m=>fe())},[t[22]||(t[22]=createBaseVNode("option",{value:""},"Select a Theme",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(n.value,m=>(openBlock(),createElementBlock("option",{value:m.id},toDisplayString(m.name),9,_hoisted_14$6))),256))],544),[[vModelSelect,E.value]])])):createCommentVNode("",!0),de("allCategories")?(openBlock(),createElementBlock("div",_hoisted_15$6,[createBaseVNode("div",_hoisted_16$6,[t[24]||(t[24]=createBaseVNode("span",{class:"input-group-addon"},"Search",-1)),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":t[9]||(t[9]=m=>h.value=m),"aria-describedby":"basic-addon3",class:"form-control",placeholder:"Search by id or name",type:"text"},null,512),[[vModelText,h.value]])])])):createCommentVNode("",!0),createBaseVNode("ul",{ref_key:"droppableArea",ref:r,class:"list-group category-items js_category",style:{"min-height":"200px"}},[(openBlock(!0),createElementBlock(Fragment,null,renderList(me("allCategories"),m=>(openBlock(),createElementBlock("li",{"data-cache-category":m.cache_category,"data-category-id":m.category_id,"data-theme-id":m.theme_id,class:"list-group-item js_item",onClick:t[10]||(t[10]=P=>U(P))},[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":P=>m.selected=P,type:"checkbox"},null,8,_hoisted_18$5),[[vShow,$.value],[vModelCheckbox,m.selected]]),createTextVNode(" "+toDisplayString(m.category_name)+" ",1),withDirectives(createBaseVNode("small",{class:"text-info",title:"Theme"}," - "+toDisplayString(G(m.theme_id)),513),[[vShow,m.theme_id>0]]),withDirectives(createBaseVNode("small",_hoisted_19$5,[...t[25]||(t[25]=[createBaseVNode("br",null,null,-1),createTextVNode("Theme is missing",-1)])],512),[[vShow,m.theme_id<=0]]),createBaseVNode("span",_hoisted_20$5,[createBaseVNode("span",_hoisted_21$5,[O.value?(openBlock(),createElementBlock("button",_hoisted_22$5,[...t[26]||(t[26]=[createBaseVNode("span",{"aria-hidden":"true",class:"fa fa-trash-o js_delete"},null,-1)])])):createCommentVNode("",!0),j.value?(openBlock(),createElementBlock("button",_hoisted_23$5,[...t[27]||(t[27]=[createBaseVNode("i",{"aria-hidden":"true",class:"fa fa-ellipsis-v js_info"},null,-1)])])):createCommentVNode("",!0)])])],8,_hoisted_17$6))),256))],512)])]),createBaseVNode("div",_hoisted_24$5,[createBaseVNode("div",_hoisted_25$5,[t[29]||(t[29]=createBaseVNode("div",{class:"panel-heading p-4"},"Drag and drop from here",-1)),de("allSiteCategories")?(openBlock(),createElementBlock("div",_hoisted_26$5,[createBaseVNode("div",_hoisted_27$5,[t[28]||(t[28]=createBaseVNode("span",{class:"input-group-addon"},"Search",-1)),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":t[11]||(t[11]=m=>k.value=m),"aria-describedby":"basic-addon3",class:"form-control",placeholder:"Search by id or name",type:"text"},null,512),[[vModelText,k.value]])])])):createCommentVNode("",!0),createBaseVNode("ul",_hoisted_28$4,[(openBlock(!0),createElementBlock(Fragment,null,renderList(me("allSiteCategories"),m=>(openBlock(),createElementBlock("li",{"data-category-id":m.category_id,class:"list-group-item js_item"},toDisplayString(m.category_name),9,_hoisted_29$3))),256))])])])]),createBaseVNode("div",{ref_key:"popover",ref:i,class:"popover hide bs-popover-end shadow","data-popper-placement":"right",role:"tooltip"},[createBaseVNode("p",_hoisted_30$3,[t[30]||(t[30]=createTextVNode(" Set theme etc for this category ",-1)),createBaseVNode("span",{"aria-label":"Close",class:"pull-right fa fa-close close",title:"Close",onClick:t[12]||(t[12]=m=>le())})]),createBaseVNode("div",_hoisted_31$3,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":t[13]||(t[13]=m=>D.theme_id=m),class:"form-select mb-2"},[t[31]||(t[31]=createBaseVNode("option",{value:""},"Select a Theme",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(n.value,m=>(openBlock(),createElementBlock("option",{value:m.id},toDisplayString(m.name),9,_hoisted_32$3))),256))],512),[[vModelSelect,D.theme_id]]),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":t[14]||(t[14]=m=>D.cache_category=m),class:"form-control mb-2",name:"cache_category",placeholder:"Enter cache category",type:"text"},null,512),[[vModelText,D.cache_category]]),createBaseVNode("div",_hoisted_33$3,[createBaseVNode("button",{class:"btn btn-primary text-center",onClick:t[15]||(t[15]=m=>pe())}," Save Settings ")])])],512)]))}},_sfc_main$u={__name:"downloads",props:["dataControllerName"],setup(w){const e=w,o=()=>{window.location.href=adminConfig.admin_path(`${e.dataControllerName}/download`)};return(r,i)=>(openBlock(),createElementBlock("button",{onClick:i[0]||(i[0]=$=>o()),type:"button",class:"btn btn-dark"},[renderSlot(r.$slots,"default",{},()=>[i[1]||(i[1]=createTextVNode("Download",-1))])]))}},_hoisted_1$q={class:"row"},_hoisted_2$l={class:"col-5"},_hoisted_3$k=["accept"],_hoisted_4$i={key:0,class:"alert alert-danger mt-1"},_hoisted_5$h={class:"col-5"},_hoisted_6$g={key:0,class:"alert alert-danger mt-1"},_hoisted_7$f={key:0,class:"row"},_hoisted_8$d={class:"progress p-0"},_hoisted_9$c=["aria-valuenow"],_hoisted_10$a={key:1,class:"row"},_hoisted_11$8={class:"col"},_sfc_main$t={__name:"file-uploader",props:["dataTitle","dataAccept"],setup(w){const e=w,o=ref(null),r=ref(null),i=reactive({tags:"",files:""}),$=ref(!1),u=reactive({files:!1,tags:!1}),p=ref(0),n=ref(""),v=ref("alert-success"),S=ref(e.dataAccept!==void 0?e.dataAccept:"image/*"),a=()=>{u.files=!1,u.tags=!1},g=()=>{i.tags="",i.files="",u.tags=!1,u.files=!1,p.value=0,o.value&&o.value.reset()},h=(l,f)=>{n.value=l,f?v.value="alert-danger":(v.value="alert-success",setTimeout(()=>{n.value=""},2e3))},k=()=>{const l=adminConfig.admin_path("gallery/uploadFiles"),f=L=>{p.value=Math.round(L.progress*100)},D=L=>{EventBus.emit("gallery-image-uploaded",L.data),g(),h(L.data.message,!1)},F=L=>{h(L.response?.statusText||L.message||"There is some error while uploading. Please try again.",!0),g()};n.value="";const N=r.value.files;let C=!1;if(N.length===0&&(u.files=!0,C=!0),i.tags===""&&(u.tags=!0,C=!0),C)return!1;$.value=!0;const M=new FormData;for(let L=0;L<N.length;L++)M.append("images[]",N[L]);M.append("tags",i.tags),M.append("groupName","content"),M.append("mediaType",S.value.replace(/[^a-zA-Z,]/g,"")),M.append("_csrf",window.HashtagCms?.csrfToken||window.Laravel?.csrfToken),axios$1.post(l,M,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:L=>{f(L)}}).then(L=>{D(L)}).catch(L=>{F(L)}).finally(()=>{$.value=!1})};return(l,f)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("form",{ref_key:"uploaderForm",ref:o,name:"uploaderForm",enctype:"multipart/form-data"},[withDirectives(createBaseVNode("div",_hoisted_1$q,[createBaseVNode("div",_hoisted_2$l,[createBaseVNode("input",{type:"file",ref_key:"allFilesC",ref:r,name:"msFiles__[]",multiple:"",class:"form-control",required:"",onChange:a,accept:S.value},null,40,_hoisted_3$k),u.files?(openBlock(),createElementBlock("div",_hoisted_4$i," Please select at least one file. ")):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_5$h,[withDirectives(createBaseVNode("input",{type:"text",name:"msTags__",id:"msTags__",required:"","onUpdate:modelValue":f[0]||(f[0]=D=>i.tags=D),class:"form-control",placeholder:"Please enter keyword to search later. User comma for multiple keywords",onChange:a},null,544),[[vModelText,i.tags]]),u.tags?(openBlock(),createElementBlock("div",_hoisted_6$g," Please enter keywords to search later. ")):createCommentVNode("",!0)]),createBaseVNode("div",{class:"col-2"},[createBaseVNode("input",{type:"button",value:"Upload",class:"btn btn-primary",onClick:k})])],512),[[vShow,!$.value]])],512),$.value?(openBlock(),createElementBlock("div",_hoisted_7$f,[createBaseVNode("div",_hoisted_8$d,[createBaseVNode("div",{class:"progress-bar progress-bar-striped bg-success",role:"progressbar",style:normalizeStyle("width:"+p.value+"%"),"aria-valuenow":p.value,"aria-valuemin":"0","aria-valuemax":"100"},toDisplayString(p.value)+"% ",13,_hoisted_9$c)])])):createCommentVNode("",!0),n.value!==""?(openBlock(),createElementBlock("div",_hoisted_10$a,[createBaseVNode("div",_hoisted_11$8,[createBaseVNode("div",{class:normalizeClass("alert m-1 "+v.value)},toDisplayString(n.value),3)])])):createCommentVNode("",!0)],64))}},_hoisted_1$p=["action"],_hoisted_2$k={class:"form-group row mb-3"},_hoisted_3$j={class:"col-sm-7"},_hoisted_4$h={class:"text text-danger"},_hoisted_5$g={class:"form-group row mb-3"},_hoisted_6$f={class:"col-sm-7"},_hoisted_7$e={class:"text text-danger"},_hoisted_8$c={class:"form-group row mb-3"},_hoisted_9$b={class:"col-sm-7"},_hoisted_10$9={class:"text text-danger"},_hoisted_11$7={class:"form-group row mb-3"},_hoisted_12$6={class:"col-sm-7"},_hoisted_13$6={class:"text text-danger"},_hoisted_14$5={class:"form-group row mb-3"},_hoisted_15$5={class:"col-sm-7"},_hoisted_16$5={class:"form-group row mb-3"},_hoisted_17$5={class:"col-sm-7"},_hoisted_18$4=["value"],_hoisted_19$4={class:"text text-danger"},_hoisted_20$4=["innerHTML"],_hoisted_21$4={class:"form-group row mb-3"},_hoisted_22$4={class:"col-sm-7"},_hoisted_23$4={class:"form-group row mb-3"},_hoisted_24$4={class:"col-sm-7"},_hoisted_25$4=["value"],_hoisted_26$4={class:"text text-danger"},_hoisted_27$4={class:"form-group row mb-3"},_hoisted_28$3={class:"col-sm-7"},_hoisted_29$2={class:"text text-danger"},_hoisted_30$2={class:"form-group row mb-3"},_hoisted_31$2={class:"col-sm-7"},_hoisted_32$2={class:"text text-danger"},_hoisted_33$2={class:"form-group row mb-3"},_hoisted_34$2={class:"col-sm-7"},_hoisted_35$2={class:"form-group row mb-3"},_hoisted_36$2={class:"col-sm-7"},_hoisted_37$2={class:"form-group row mb-3"},_hoisted_38$2={class:"col-sm-7"},_hoisted_39$2={class:"form-group row mb-3"},_hoisted_40$2={class:"col-sm-7"},_hoisted_41$2={class:"form-group row mb-3"},_hoisted_42$2={class:"col-sm-7"},_hoisted_43$2={class:"form-group row mb-3"},_hoisted_44$2={class:"col-sm-7"},_hoisted_45$2={class:"form-group row mb-3"},_hoisted_46$2={class:"border"},_hoisted_47$2={class:"form-group"},_hoisted_48$2={class:"col-sm-7"},_hoisted_49$2={class:"form-group row mb-3"},_hoisted_50$2={class:"col-sm-7"},_hoisted_51$2=["value"],_hoisted_52$2={class:"text text-danger"},_hoisted_53$2={class:"form-group row mb-3"},_hoisted_54$2={class:"col-sm-7"},_hoisted_55$2={class:"form-group row mb-3"},_hoisted_56$2={class:"col-sm-7"},_hoisted_57$2={class:"row mb-3"},_hoisted_58$1={class:"form-group center-align"},_hoisted_59$1=["href"],_sfc_main$s={__name:"frontend-module-creator",props:["dataControllerName","dataBackUrl","dataSite","dataResults","dataActionPerformed","dataDataTypes","dataDataTypesInfo","dataFormAction","dataSiteId"],setup(w){const e=w,o=getCurrentInstance(),r={"font-size":"14px"},i={width:"100%"},$=[{name:"param",value:"param"},{name:"data",value:"data"}],u=ref(!1),p=ref(SafeJsonParse(e.dataResults,[]));ref(SafeJsonParse(e.dataSite,[]));const n=reactive({}),v=ref(SafeJsonParse(e.dataDataTypes,[])),S=[{name:"GET",value:"GET"},{name:"POST",value:"POST"}],a=reactive(new Form({id:0,name:"",icon_css:"",alias:"",view_name:"",cache_group:"",data_type:"",method_type:"",data_handler:"",data_key_map:"",query_statement:"",query_as:"",description:"",site_id:1,is_seo_module:0,individual_cache:0,shared:0,update_inAllSites:0,is_mandatory:0,service_params:"",actionPerformed:e.dataActionPerformed,backURL:e.dataBackUrl,headers:"",live_edit:0,linked_module:""})),g=ref({}),h=ref("");ref(SafeJsonParse(e.dataDataTypesInfo,[]));const k=ref(e.dataFormAction),l=computed(()=>a.data_type.toLowerCase().indexOf("queryservice")>-1),f=computed(()=>a.data_type.toLowerCase().indexOf("service")>-1),D=b=>{const s=document.querySelector("#addEditFrm");for(let y in b){const j=b[y];Object.prototype.hasOwnProperty.call(a,y)&&typeof a[y]!="function"&&(a[y]=j);const O=s&&s[y]||document.getElementById(y);if(O){const G=O.type;(G==="checkbox"||G==="radio")&&G!=="submit"&&(a[y]=j===1)}}},F=()=>{PasteFromClipboard().then(()=>{IsJson(a.name)&&D(SafeJsonParse(a.name,{}))}).catch(b=>{console.error("unable to paste",b)})},N=()=>{if(u.value===!1){const b=a.name;a.alias=`MODULE_${b.toUpperCase()}`.replace(/\s/g,"_"),a.view_name=b.toLowerCase().replace(/\s/g,"-")}},C=b=>{n.show=b!==""&&(b.indexOf("Service")>-1||b.indexOf("service")>-1)},M=b=>{if(g.value={},b.errors)for(let s in b.errors)Object.prototype.hasOwnProperty.call(b.errors,s)&&(g.value[s]=b.errors[s][0]);h.value=b.message},L=b=>{const s=y=>y.toString()==="true"||y.toString()==="1";s(b.isSaved)?(h.value="",Toast.show(o,"Saved..."),s(b.isSaved)&&(window.location.href=b.backURL)):(Toast.show(o,"There is some error..."),h.value=b.message)},V=()=>{a.is_seo_module=a.is_seo_module?a.is_seo_module:0,a.individual_cache=a.individual_cache?a.individual_cache:0,a.update_inAllSites=a.update_inAllSites?a.update_inAllSites:0,a.is_mandatory=a.is_mandatory?a.is_mandatory:0,a.service_params=a.service_params?a.service_params:"",a.shared=a.shared?a.shared:0,a.live_edit=a.live_edit?a.live_edit:0,a.post(k.value).then(b=>{L(b)}).catch(b=>{M(b)})},E=b=>{const s=b.target.getAttribute("name");s&&(g.value[s]=""),h.value!==""&&(h.value="")};return onMounted(()=>{e.dataActionPerformed==="edit"?D(p.value):a.site_id=e.dataSiteId}),(b,s)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("form",{id:"addEditFrm",action:k.value,class:"form-group",method:"post",role:"form",onKeyup:s[23]||(s[23]=y=>E(y)),onSubmit:withModifiers(V,["prevent"])},[createBaseVNode("div",_hoisted_2$k,[s[25]||(s[25]=createBaseVNode("label",{class:"col-sm-2",for:"name"},"Name",-1)),createBaseVNode("div",_hoisted_3$j,[withDirectives(createBaseVNode("input",{onBlur:F,id:"name","onUpdate:modelValue":s[0]||(s[0]=y=>a.name=y),class:"form-control",name:"name",placeholder:"Module name",required:"",type:"text"},null,544),[[vModelText,a.name]]),createBaseVNode("label",null,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":s[1]||(s[1]=y=>u.value=y),type:"checkbox",onClick:s[2]||(s[2]=y=>N())},null,512),[[vModelCheckbox,u.value]]),s[24]||(s[24]=createTextVNode(" Go Conventional",-1))]),createBaseVNode("div",_hoisted_4$h,toDisplayString(this.errors.name),1)])]),createBaseVNode("div",_hoisted_5$g,[s[26]||(s[26]=createBaseVNode("label",{class:"col-sm-2",for:"alias"},"Alias",-1)),createBaseVNode("div",_hoisted_6$f,[withDirectives(createBaseVNode("input",{id:"alias","onUpdate:modelValue":s[3]||(s[3]=y=>a.alias=y),class:"form-control",name:"alias",placeholder:"Alias",required:"",type:"text"},null,512),[[vModelText,a.alias]]),createBaseVNode("div",_hoisted_7$e,toDisplayString(this.errors.alias),1)])]),createBaseVNode("div",_hoisted_8$c,[s[27]||(s[27]=createBaseVNode("label",{class:"col-sm-2",for:"view_name"},"View Name",-1)),createBaseVNode("div",_hoisted_9$b,[withDirectives(createBaseVNode("input",{id:"view_name","onUpdate:modelValue":s[4]||(s[4]=y=>a.view_name=y),class:"form-control",name:"view_name",placeholder:"View name",required:"",type:"text"},null,512),[[vModelText,a.view_name]]),createBaseVNode("div",_hoisted_10$9,toDisplayString(this.errors.view_name),1)])]),createBaseVNode("div",_hoisted_11$7,[s[28]||(s[28]=createBaseVNode("label",{class:"col-sm-2",for:"cache_group"},"Cache Group",-1)),createBaseVNode("div",_hoisted_12$6,[withDirectives(createBaseVNode("input",{id:"cache_group","onUpdate:modelValue":s[5]||(s[5]=y=>a.cache_group=y),class:"form-control",maxlength:"60",name:"cache_group",placeholder:"Cache Category",type:"text"},null,512),[[vModelText,a.cache_group]]),createBaseVNode("div",_hoisted_13$6,toDisplayString(this.errors.cache_group),1)])]),createBaseVNode("div",_hoisted_14$5,[s[29]||(s[29]=createBaseVNode("label",{class:"col-sm-2",for:"individual_cache"},"Is Individual Cache?",-1)),createBaseVNode("label",_hoisted_15$5,[withDirectives(createBaseVNode("input",{id:"individual_cache","onUpdate:modelValue":s[6]||(s[6]=y=>a.individual_cache=y),name:"individual_cache",type:"checkbox"},null,512),[[vModelCheckbox,a.individual_cache]])])]),createBaseVNode("div",_hoisted_16$5,[s[31]||(s[31]=createBaseVNode("label",{class:"col-sm-2",for:"data_type"},"Data Type",-1)),createBaseVNode("div",_hoisted_17$5,[withDirectives(createBaseVNode("select",{id:"data_type","onUpdate:modelValue":s[7]||(s[7]=y=>a.data_type=y),class:"form-select select-big",name:"data_type",onChange:s[8]||(s[8]=y=>C(a.data_type))},[s[30]||(s[30]=createBaseVNode("option",{value:""},"Select",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(v.value,y=>(openBlock(),createElementBlock("option",{value:y},toDisplayString(y),9,_hoisted_18$4))),256))],544),[[vModelSelect,a.data_type]]),createBaseVNode("div",_hoisted_19$4,toDisplayString(this.errors.data_type),1),withDirectives(createBaseVNode("div",{class:"alert alert-info",innerHTML:this.dataTypesInfo[a.data_type]||""},null,8,_hoisted_20$4),[[vShow,a.data_type!=""&&this.dataTypesInfo[a.data_type]]])])]),createBaseVNode("div",_hoisted_21$4,[s[32]||(s[32]=createBaseVNode("label",{class:"col-sm-2",for:"data_handler"},"Data Handler",-1)),createBaseVNode("label",_hoisted_22$4,[withDirectives(createBaseVNode("textarea",{id:"data_handler","onUpdate:modelValue":s[9]||(s[9]=y=>a.data_handler=y),class:"form-control input","mb-2s":"5",name:"data_handler",placeholder:"Query or Service URL or filteration for this module",row:"",style:i},null,512),[[vModelText,a.data_handler]])])]),withDirectives(createBaseVNode("div",null,[createBaseVNode("div",_hoisted_23$4,[s[34]||(s[34]=createBaseVNode("label",{class:"col-sm-2",for:"method_type"},"Method Type",-1)),createBaseVNode("div",_hoisted_24$4,[withDirectives(createBaseVNode("select",{id:"method_type","onUpdate:modelValue":s[10]||(s[10]=y=>a.method_type=y),class:"form-select select-big",name:"method_type"},[s[33]||(s[33]=createBaseVNode("option",{value:""},"Select",-1)),(openBlock(),createElementBlock(Fragment,null,renderList(S,y=>createBaseVNode("option",{value:y.value},toDisplayString(y.name),9,_hoisted_25$4)),64))],512),[[vModelSelect,a.method_type]]),createBaseVNode("div",_hoisted_26$4,toDisplayString(this.errors.data_type),1)])]),createBaseVNode("div",_hoisted_27$4,[s[35]||(s[35]=createBaseVNode("label",{class:"col-sm-2",for:"service_params"},"Service Params",-1)),createBaseVNode("div",_hoisted_28$3,[withDirectives(createBaseVNode("input",{id:"service_params","onUpdate:modelValue":s[11]||(s[11]=y=>a.service_params=y),class:"form-control",name:"service_params",placeholder:"Service Params",type:"text"},null,512),[[vModelText,a.service_params]]),createBaseVNode("div",_hoisted_29$2,toDisplayString(this.errors.service_params),1)])]),createBaseVNode("div",_hoisted_30$2,[s[36]||(s[36]=createBaseVNode("label",{class:"col-sm-2",for:"service_params"},"Service Headers",-1)),createBaseVNode("div",_hoisted_31$2,[withDirectives(createBaseVNode("textarea",{id:"headers","onUpdate:modelValue":s[12]||(s[12]=y=>a.headers=y),class:"form-control input",name:"headers",placeholder:"Service header as json",rows:"5"},null,512),[[vModelText,a.headers]]),createBaseVNode("div",_hoisted_32$2,toDisplayString(this.errors.headers),1)])])],512),[[vShow,f.value]]),createBaseVNode("div",_hoisted_33$2,[s[37]||(s[37]=createBaseVNode("label",{class:"col-sm-2",for:"data_key_map"},"Data Key Map",-1)),createBaseVNode("label",_hoisted_34$2,[withDirectives(createBaseVNode("textarea",{id:"data_key_map","onUpdate:modelValue":s[13]||(s[13]=y=>a.data_key_map=y),class:"form-control input",name:"data_key_map",placeholder:"key to be replaced in comma seperated. ie: :site_id, :lang_id ",rows:"5",style:i},null,512),[[vModelText,a.data_key_map]])])]),createBaseVNode("div",_hoisted_35$2,[s[38]||(s[38]=createBaseVNode("label",{class:"col-sm-2",for:"is_seo_module"},"Use this module as seo module",-1)),createBaseVNode("label",_hoisted_36$2,[withDirectives(createBaseVNode("input",{id:"is_seo_module","onUpdate:modelValue":s[14]||(s[14]=y=>a.is_seo_module=y),name:"is_seo_module",type:"checkbox"},null,512),[[vModelCheckbox,a.is_seo_module]])])]),createBaseVNode("div",_hoisted_37$2,[s[39]||(s[39]=createBaseVNode("label",{class:"col-sm-2",for:"is_mandatory"},"Is Mandatory?",-1)),createBaseVNode("label",_hoisted_38$2,[withDirectives(createBaseVNode("input",{id:"is_mandatory","onUpdate:modelValue":s[15]||(s[15]=y=>a.is_mandatory=y),name:"is_mandatory",type:"checkbox"},null,512),[[vModelCheckbox,a.is_mandatory]])])]),createBaseVNode("div",_hoisted_39$2,[s[40]||(s[40]=createBaseVNode("label",{class:"col-sm-2",for:"shared"},"Is Shared?",-1)),createBaseVNode("label",_hoisted_40$2,[withDirectives(createBaseVNode("input",{id:"shared","onUpdate:modelValue":s[16]||(s[16]=y=>a.shared=y),name:"shared",type:"checkbox"},null,512),[[vModelCheckbox,a.shared]])])]),createBaseVNode("div",_hoisted_41$2,[s[41]||(s[41]=createBaseVNode("label",{class:"col-sm-2",for:"linked_module"},"Linked Module Alias",-1)),createBaseVNode("label",_hoisted_42$2,[withDirectives(createBaseVNode("input",{id:"linked_module","onUpdate:modelValue":s[17]||(s[17]=y=>a.linked_module=y),name:"linked_module",type:"text",class:"form-control"},null,512),[[vModelText,a.linked_module]])])]),createBaseVNode("div",_hoisted_43$2,[s[42]||(s[42]=createBaseVNode("label",{class:"col-sm-2",for:"live_edit"},"Live Edit?",-1)),createBaseVNode("label",_hoisted_44$2,[withDirectives(createBaseVNode("input",{id:"live_edit","onUpdate:modelValue":s[18]||(s[18]=y=>a.live_edit=y),name:"live_edit",type:"checkbox"},null,512),[[vModelCheckbox,a.live_edit]])])]),withDirectives(createBaseVNode("div",_hoisted_45$2,[createBaseVNode("fieldset",_hoisted_46$2,[s[44]||(s[44]=createBaseVNode("legend",null,"Query Service Properties",-1)),createBaseVNode("div",_hoisted_47$2,[createBaseVNode("label",{class:"col-sm-2",for:"query_statement",style:r},"Query"),createBaseVNode("label",_hoisted_48$2,[withDirectives(createBaseVNode("textarea",{id:"query_statement","onUpdate:modelValue":s[19]||(s[19]=y=>a.query_statement=y),class:"form-control input",name:"query_statement",rows:"5",style:i},null,512),[[vModelText,a.query_statement]])])]),createBaseVNode("div",_hoisted_49$2,[createBaseVNode("label",{class:"col-sm-2",for:"query_as",style:r},"Get query data as"),createBaseVNode("div",_hoisted_50$2,[withDirectives(createBaseVNode("select",{id:"query_as","onUpdate:modelValue":s[20]||(s[20]=y=>a.query_as=y),class:"form-select select-big",name:"query_as"},[s[43]||(s[43]=createBaseVNode("option",{value:""},"Select",-1)),(openBlock(),createElementBlock(Fragment,null,renderList($,y=>createBaseVNode("option",{value:y.value},toDisplayString(y.name),9,_hoisted_51$2)),64))],512),[[vModelSelect,a.query_as]]),createBaseVNode("div",_hoisted_52$2,toDisplayString(this.errors.query_as),1)])])])],512),[[vShow,l.value]]),createBaseVNode("div",_hoisted_53$2,[s[45]||(s[45]=createBaseVNode("label",{class:"col-sm-2",for:"description"},"Description or different database connection name if it is a query module",-1)),createBaseVNode("label",_hoisted_54$2,[withDirectives(createBaseVNode("textarea",{id:"description","onUpdate:modelValue":s[21]||(s[21]=y=>a.description=y),class:"form-control input",name:"description",rows:"5",style:i},null,512),[[vModelText,a.description]])])]),withDirectives(createBaseVNode("div",_hoisted_55$2,[s[47]||(s[47]=createBaseVNode("label",{class:"col-sm-2",for:"update_inAllSites"},"Update in all sites?",-1)),createBaseVNode("label",_hoisted_56$2,[withDirectives(createBaseVNode("input",{id:"update_inAllSites","onUpdate:modelValue":s[22]||(s[22]=y=>a.update_inAllSites=y),name:"update_inAllSites",type:"checkbox"},null,512),[[vModelCheckbox,a.update_inAllSites]]),s[46]||(s[46]=createBaseVNode("div",{class:"alert alert-info"}," Be careful by clicking this checkbox. Content will be updated in all sites based on alias. If you are changing alias it will be updated only in this site. ",-1))])],512),[[vShow,this.showAllUpdateSection]]),createBaseVNode("div",_hoisted_57$2,[withDirectives(createBaseVNode("div",{class:"alert alert-danger"},toDisplayString(h.value),513),[[vShow,typeof h.value=="string"&&h.value!==""]]),createBaseVNode("div",_hoisted_58$1,[s[48]||(s[48]=createBaseVNode("input",{class:"btn btn-success btn-from-submit",name:"submit",type:"submit",value:"Save"},null,-1)),createBaseVNode("a",{href:w.dataBackUrl,class:"btn btn-outline-secondary"},"Back",8,_hoisted_59$1)])])],40,_hoisted_1$p)]))}},_hoisted_1$o=["value"],_sfc_main$r={__name:"global-site-button",props:["dataSites","dataCurrentSite","dataSupportedSites","dataIsAdmin"],setup(w){const e=w,o=ref(SafeJsonParse(e.dataSites,[])),r=ref(e.dataCurrentSite===void 0?1:parseInt(e.dataCurrentSite));ref(SafeJsonParse(e.dataSupportedSites,[]));const i=(u=!1)=>{const p=new SecureLS,n=p.get("allSites");if(n.length===0||u===!0){const v=adminConfig.admin_path("site/getSitesForUsers");axios$1.get(v,{withCredentials:!1}).then(S=>{o.value=S.data,p.set("allSites",JSON.stringify(o.value))}).catch(S=>{console.error(S)})}else o.value=SafeJsonParse(n,[])},$=()=>{const u=adminConfig.admin_path(`ajax/setSiteId/${r.value}`);axios$1.get(u).then(()=>{window.location.href=window.location.pathname}).catch(p=>{console.error(p)})};return onMounted(()=>{i()}),(u,p)=>withDirectives((openBlock(),createElementBlock("select",{onClick:p[0]||(p[0]=n=>i(!0)),name:"site_combo",class:"form-select",id:"site_combo",onChange:$,"onUpdate:modelValue":p[1]||(p[1]=n=>r.value=n)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.value,n=>(openBlock(),createElementBlock("option",{value:n.id},toDisplayString(n.name),9,_hoisted_1$o))),256))],544)),[[vModelSelect,r.value]])}},_hoisted_1$n={style:{"text-transform":"capitalize"}},_hoisted_2$j={class:"row",style:{"max-height":"500px",overflow:"scroll"}},_hoisted_3$i={class:"table table-striped"},_hoisted_4$g={key:0},_hoisted_5$f=["innerHTML"],_hoisted_6$e=["textContent"],_hoisted_7$d={key:0},_hoisted_8$b={style:{"background-color":"#fff",border:"none"}},_hoisted_9$a={class:"text text-danger"},_sfc_main$q={__name:"info-popup",props:["dataModel","dataModuleRelations","dataId"],setup(w,{expose:e}){const o=w,r=getCurrentInstance(),i=ref(null),$=ref(o.dataModel===void 0||o.dataModel===""?null:o.dataModel);ref(o.dataModuleRelations===void 0||o.dataModuleRelations===""?"":o.dataModuleRelations),ref(o.dataId===void 0||o.dataId===""?0:parseInt(o.dataId));const u=ref([]),p=ref(""),n=ref(!0),v=ref([]),S=l=>v.value.indexOf(l)>=0,a=(l,f)=>{if(!n.value)return f;if(l==="id"&&n.value){let D=`edit/${f}`;return D=adminConfig.admin_path(`${$.value}/${D}`),`<a href="${D}">${f}</a>`}return f},g=()=>{i.value&&i.value.open(),EventBus.emit("info-popup-open")},h=()=>{i.value&&i.value.close(),EventBus.emit("info-popup-close")};return e({showInfo:(l,f,D=[],F=!0)=>{n.value=F.toString()==="true",v.value=D,$.value=l,Loader.show(r),axios$1.get(`${adminConfig.get("base_path")}/ajax/getInfo/${l}/${f}`).then(N=>{p.value="",u.value={},u.value=N.data.results,N.data.error===!0&&(p.value=N.data.message),g(),Loader.hide(r)}).catch(N=>{Toast.show(r,N.message),Loader.hide(r)})},open:g,close:h}),(l,f)=>(openBlock(),createBlock(_sfc_main$x,{ref_key:"infoModal",ref:i,"data-show-footer":"true"},{title:withCtx(()=>[createBaseVNode("div",_hoisted_1$n,toDisplayString($.value)+" Info",1)]),content:withCtx(()=>[createBaseVNode("div",_hoisted_2$j,[createBaseVNode("table",_hoisted_3$i,[createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(u.value,(D,F)=>(openBlock(),createElementBlock(Fragment,null,[S(F)?createCommentVNode("",!0):(openBlock(),createElementBlock("tr",_hoisted_4$g,[createBaseVNode("td",null,toDisplayString(F),1),createBaseVNode("td",null,[F==="id"?(openBlock(),createElementBlock("span",{key:0,innerHTML:a(F,D)},null,8,_hoisted_5$f)):createCommentVNode("",!0),F!=="id"?(openBlock(),createElementBlock("span",{key:1,textContent:toDisplayString(a(F,D))},null,8,_hoisted_6$e)):createCommentVNode("",!0)])]))],64))),256)),p.value!==""?(openBlock(),createElementBlock("tr",_hoisted_7$d,[createBaseVNode("td",_hoisted_8$b,[createBaseVNode("div",_hoisted_9$a,toDisplayString(p.value),1)])])):createCommentVNode("",!0)])])])]),footer:withCtx(()=>[createBaseVNode("button",{class:"btn btn-outline-secondary",onClick:f[0]||(f[0]=D=>h())},"Close")]),_:1},512))}},_hoisted_1$m={class:"row mt-2 pb-2 border-bottom"},_hoisted_2$i={class:"col-auto"},_hoisted_3$h=["value"],_hoisted_4$f={class:"col-auto"},_hoisted_5$e=["value"],_hoisted_6$d={class:"col-auto"},_hoisted_7$c=["value"],_hoisted_8$a={class:"col-auto"},_hoisted_9$9={class:"col d-flex justify-content-end"},_hoisted_10$8={key:0,class:"btn-group"},_hoisted_11$6={key:0,class:"row mt-3"},_hoisted_12$5={class:"col left-zero"},_hoisted_13$5={class:"alert alert-danger col-md-8"},_hoisted_14$4=["innerHTML"],_hoisted_15$4={class:"row mt-3"},_hoisted_16$4={class:"col col-9"},_hoisted_17$4={class:"row homepage-modules"},_hoisted_18$3={class:"non-selectable shadow-sm card mb-3"},_hoisted_19$3=["onDblclick"],_hoisted_20$3={class:"pull-right small"},_hoisted_21$3=["onClick"],_hoisted_22$3=["onClick"],_hoisted_23$3=["onClick"],_hoisted_24$3=["data-hook-id"],_hoisted_25$3=["data-module-id"],_hoisted_26$3=["onClick"],_hoisted_27$3=["data-hook-id"],_hoisted_28$2={key:0,class:"card-footer bg-gradient border-light"},_hoisted_29$1=["onClick","data-hook-id"],_hoisted_30$1={key:0,class:"col col-3"},_hoisted_31$1={class:"panel-sub-heading"},_hoisted_32$1={class:"input-group"},_hoisted_33$1={id:"draggableModules",class:"modules-list all-modules-right"},_hoisted_34$1=["data-module-id"],_hoisted_35$1=["innerHTML"],_hoisted_36$1={class:"row"},_hoisted_37$1={key:0,class:"col-auto p-1"},_hoisted_38$1=["value"],_hoisted_39$1={key:1,class:"col-auto p-1"},_hoisted_40$1=["value"],_hoisted_41$1={key:2,class:"col-auto p-1"},_hoisted_42$1=["value"],_hoisted_43$1={class:"col-auto p-1"},_hoisted_44$1=["value"],_hoisted_45$1={class:"row mt-2"},_hoisted_46$1={key:0,class:"col-auto p-1"},_hoisted_47$1=["value"],_hoisted_48$1={key:1,class:"col-auto p-1"},_hoisted_49$1=["value"],_hoisted_50$1={key:2,class:"col-auto p-1"},_hoisted_51$1=["value"],_hoisted_52$1={class:"col-auto p-1"},_hoisted_53$1=["value"],_hoisted_54$1={class:"row"},_hoisted_55$1={class:"plr5 v-space"},_hoisted_56$1={class:"loader"},_hoisted_57$1={class:"p-2",title:"Delete from other platforms too"},modalCss="modal-lg",_sfc_main$p={__name:"homepage",props:["dataCategories","dataMicrosites","dataPlatforms","dataSiteId","dataMicrositeId","dataCategoryId","dataPlatformId","dataSiteInfo","dataHookInfo","dataAllModules","dataCategoryModules","dataCategoryInfo","dataThemeInfo","dataUserRights","dataIsModuleReadonly","dataAllSites"],setup(w){const e=w,o=getCurrentInstance(),r=ref(null),i=ref(null),$=ref(null),u=ref(null),p=reactive({}),n=reactive({}),v=I=>c=>{c&&(p[I]=c)},S=I=>c=>{c&&(n[I]=c)},a=reactive({}),g=ref(SafeJsonParse(e.dataCategories,[])),h=ref(SafeJsonParse(e.dataMicrosites,[])),k=ref(SafeJsonParse(e.dataPlatforms,[])),l=ref(e.dataSiteId===void 0||e.dataSiteId===""?1:parseInt(e.dataSiteId)),f=ref(e.dataMicrositeId===void 0||e.dataMicrositeId===""?0:parseInt(e.dataMicrositeId)),D=ref(e.dataPlatformId===void 0||e.dataPlatformId===""?1:parseInt(e.dataPlatformId)),F=ref(e.dataCategoryId===void 0||e.dataCategoryId===""?0:parseInt(e.dataCategoryId));ref(SafeJsonParse(e.dataSiteInfo,[]));const N=ref(SafeJsonParse(e.dataHookInfo,[])),C=ref(SafeJsonParse(e.dataAllModules,[])),M=ref(SafeJsonParse(e.dataCategoryModules,[])),L=ref(SafeJsonParse(e.dataCategoryInfo,[])),V=ref(SafeJsonParse(e.dataThemeInfo,[])),E=ref([]),b=reactive({}),s=reactive({}),y=ref([]),j=ref(!1),O=ref(""),G=ref(!1),R=reactive({site_id:0,microsite_id:0,platform_id:0,category_id:0}),K=reactive({site_id:0,microsite_id:0,platform_id:0,category_id:0}),X=ref(!1),Q=reactive({draggable:null}),re=ref(SafeJsonParse(e.dataUserRights,[])),le=ref(e.dataIsModuleReadonly==="1"),oe=ref(SafeJsonParse(e.dataAllSites,[])),U=computed(()=>oe.value.length>1),B=computed(()=>h.value.length>0),x=computed(()=>k.value.length>1),W=computed(()=>V.value&&V.value.id),Y=computed(()=>re.value.indexOf("edit")>=0&&le.value===!1),se=computed(()=>re.value.indexOf("delete")>=0&&le.value===!1),ue=computed(()=>a[R.site_id]||[]),_e=computed(()=>a[K.site_id]||[]),de=computed(()=>y.value.length>0),me=computed(()=>"btn btn-success btn-form-submit"+(j.value===!0?"":" disabled")),pe=computed(()=>{let I=O.value;return I!==""&&I!=null?(I=I.toLowerCase(),C.value.filter(c=>{const _=c.alias.toLowerCase(),J=c.name.toLowerCase();return c.id.toString()===I||_.includes(I)||J.includes(I)})):C.value}),fe=(I,c="alias")=>{const _=N.value;for(let J=0;J<_.length;J++)if(_[J][c]===I)return _[J];return null},T=I=>E.value[I]||null,d=I=>{y.value.push({message:I})},t=(I,c=!1)=>{let _="";typeof I=="string"?_=I:_=I?.data?.message||"Unknown error!",Toast.show(o,_,5e3),c&&setTimeout(()=>{window.location.reload()},1e3)},m=(I,c)=>{r.value&&r.value.showInfo(I,c)},P=()=>({site_id:l.value,microsite_id:f.value,platform_id:D.value,category_id:F.value}),A=I=>{if(I===void 0)return j.value;j.value=I},H=(I,c)=>{const _=T(I);return _!==null?_.modules.findIndex(J=>c.id===J.id):-1},q=I=>{if(s[I])return s[I];let c=null;for(let _=0;_<C.value.length;_++)if(C.value[_].id.toString()===I.toString()){s[I]=C.value[_],c=C.value[_];break}return c},z=(I,c)=>{if(H(I,c)===-1){const J=T(I);return J.modules.push(c),J.modules.length}return!1},ee=(I,c="module_id",_=null)=>{let J;if(Object.prototype.toString.call(I)==="[object Object]"?J=I:(J=P(),J[c]=parseInt(I)),_!==null){J.hook_id=parseInt(_);const Z=b[_],ne=q(I),te=H(Z.hookIndex,ne);te!==-1&&T(Z.hookIndex).modules.splice(te,1)}A(!0)},ae=(I="add")=>{document.querySelectorAll(".js_hook_modules").forEach(_=>{_.classList[I]("module-drop-eager"),_.closest("div.js_modules").classList[I]("p-0","m-0")})},ie=()=>{if(!Y.value)return!1;const I=document.getElementById("draggableModules");Q.draggable=Sortable.create(I,{animation:200,draggable:".js_item",group:{name:"modulesBox"},sort:!1,ghostClass:"js_modules",onEnd:c=>{const{to:_,item:J}=c,Z=_.getAttribute("data-hook-id"),ne=J.getAttribute("data-module-id");if(Z){const te=b[Z],ce=q(ne),$e=z(te.hookIndex,ce);J.parentNode&&J.parentNode.removeChild(J),ae("remove"),$e===!1&&Toast.show(o,"Module is already added in this hook...")}A(!0)},onStart:()=>{ae("add")}})},Ve=()=>{if(!Y.value)return!1;nextTick(()=>{document.querySelectorAll(".js_modules").forEach(c=>{Sortable.create(c,{animation:200,filter:".js_delete",group:{name:"droppable",put:"modulesBox"},onFilter:_=>{const{item:J,target:Z}=_,te=J.parentNode.getAttribute("data-hook-id"),ce=J.getAttribute("data-module-id");Sortable.utils.is(Z,".js_delete")&&ee(ce,"module_id",te)},onUpdate:()=>{A(!0)}})}),ie()})},Se=()=>{if(W.value){const I=V.value,c=I.skeleton,_=/(%{cms.+}%)/gim,J=c.match(_);if(J&&J.length>0){let Z=0;J.forEach(ne=>{const ce=ne.replace("%{cms.","").replace("}%","").split("."),$e=ce[0],ke=ce[1];if($e==="hook"){const ve=fe(ke);ve!==null?(E.value.push({name:ke,modules:[],info:ve}),b[ve.id]={info:ve,hookIndex:Z},Z++):console.error(`@parseTheme ${ke}. You need to add in your site`)}})}else d(`There is no hook defined in for this theme (${I.name})`)}else d("There is no theme available for this category")},we=()=>{const I=M.value;I.length>0?I.forEach(c=>{const _=b[c.hook_id];try{const J=q(c.module_id);J&&z(_.hookIndex,J)}catch(J){console.error(`@populateModules: ${J.message}`),t(`@populateModules: ${J.message}`)}}):Toast.show(o,"There is no module added for this category. Drag from the right panel to the left boxes. ",5e3)},ye=()=>{oe.value.length>0?(R.site_id=oe.value[0].id,K.site_id=l.value):(R.site_id=l.value,K.site_id=l.value),R.platform_id=D.value,K.platform_id=D.value,K.category_id=F.value},Ce=()=>{oe.value.length>0&&oe.value.forEach(I=>{a[I.id]=I.category}),ye()},xe=()=>{if(g.value.length===0&&d("No category found!"),L.value.length===0&&d("There is a mismatch in site default category. Please fix that."),W.value)Se(),we(),Ve(),Ce();else{const I=adminConfig.admin_path("category/settings",{platform_id:D.value});d(`This category/platform/theme is not available in category_site table. You need to drag and drop in <a href='${I}'>category settings</a>.`),d("Dont' forget the set the theme there.")}},Ne=(I,c)=>(Loader.show(o),new Promise((_,J)=>{axios$1.post(I,c).then(Z=>_(Z)).catch(Z=>J(SafeErrorData(Z))).finally(()=>Loader.hide(o))})),Ee=()=>{if(A()===!1)return!1;const I=document.querySelectorAll(".js_hook_modules"),c=[];if(I.forEach(_=>{const J=_.querySelectorAll("li.js_item"),Z=_.getAttribute("data-hook-id");if(J.length>0){const ne=Array.from(J).map((te,ce)=>({module_id:te.getAttribute("data-module-id"),position:ce+1}));c.push({hook_id:Z,modules:ne})}}),c.length>0){const _={data:c,where:P(),applicableForAllPlatforms:!1};Ne(adminConfig.admin_path("homepage/saveSettings"),_).then(()=>{Toast.show(o,"Saved..."),A(!1)}).catch(J=>t(J))}},ge=()=>{const I=P();delete I.site_id,I.microsite_id===0&&delete I.microsite_id,window.location.href=adminConfig.admin_path("homepage/ui",I)},be=I=>{const c=p[I];c&&c.classList.toggle("hide")},De=I=>{const c=n[I];if(!c)return;const _=c.classList.contains("fixed"),J=Z=>{E.value.forEach(ne=>{const te=n[ne.info.id];te&&(Z?(te.classList.add("hide"),te.classList.remove("fixed")):(te.classList.remove("hide"),te.classList.remove("fixed")))}),u.value&&(Z?u.value.classList.add("hide"):u.value.classList.remove("hide"))};_?J(!1):(J(!0),c.classList.remove("hide"),c.classList.add("fixed"))},Me=I=>{const c=b[I],_=T(c.hookIndex);_.modules=[],ee(I,"hook_id")},Be=I=>{I?Modal.open(o,"deleteBox"):Modal.close(o,"deleteBox")},Te=()=>{Be(!1),E.value.forEach(I=>{I.modules=[]}),ee(F.value,"category_id")},he=(I=!0)=>{I?(ye(),Modal.open(o,"copyBox")):Modal.close(o,"copyBox")},Ie=()=>{X.value=!0;const I={fromData:R,toData:K},c=adminConfig.admin_path("homepage/copyData");Ne(c,I).then(_=>{_.data.error?Toast.show(o,_.data.message,5e3):_.data.success&&(he(!1),Toast.show(o,"Copied. Reloading..."),window.location.reload()),X.value=!1}).catch(_=>{he(!1),X.value=!1,t(_)})},Le=I=>I.modules&&I.modules.length>0;return onMounted(()=>{xe()}),(I,c)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$m,[withDirectives(createBaseVNode("div",_hoisted_2$i,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":c[0]||(c[0]=_=>f.value=_),class:"form-select select",onChange:c[1]||(c[1]=_=>ge())},[c[24]||(c[24]=createBaseVNode("option",{value:"0"},"Select a MicroSite",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(h.value,_=>(openBlock(),createElementBlock("option",{value:_.id},toDisplayString(_.name),9,_hoisted_3$h))),256))],544),[[vModelSelect,f.value]])],512),[[vShow,B.value]]),createBaseVNode("div",_hoisted_4$f,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":c[2]||(c[2]=_=>F.value=_),class:"form-select select",onChange:c[3]||(c[3]=_=>ge())},[c[25]||(c[25]=createBaseVNode("option",null,"Select a Category",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(g.value,_=>(openBlock(),createElementBlock("option",{value:_.category_id},toDisplayString(_.name),9,_hoisted_5$e))),256))],544),[[vModelSelect,F.value]])]),createBaseVNode("div",_hoisted_6$d,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":c[4]||(c[4]=_=>D.value=_),class:"form-select select",onChange:c[5]||(c[5]=_=>ge())},[c[26]||(c[26]=createBaseVNode("option",null,"Select a Platform",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(k.value,_=>(openBlock(),createElementBlock("option",{value:_.id},toDisplayString(_.name),9,_hoisted_7$c))),256))],544),[[vShow,x.value],[vModelSelect,D.value]])]),withDirectives(createBaseVNode("div",_hoisted_8$a,[createBaseVNode("span",{class:"hand",title:"Click to see theme info",onClick:c[6]||(c[6]=_=>m("theme",V.value.id))},[c[27]||(c[27]=createTextVNode("Theme: ",-1)),createBaseVNode("u",null,toDisplayString(V.value.name),1)])],512),[[vShow,W.value]]),createBaseVNode("div",_hoisted_9$9,[W.value?(openBlock(),createElementBlock("div",_hoisted_10$8,[se.value?(openBlock(),createElementBlock("button",{key:0,"aria-label":"Delete All Modules form this category",class:"btn btn-danger",title:"Delete All Modules form this category",type:"button",onClick:c[7]||(c[7]=_=>Be(!0))},[...c[28]||(c[28]=[createBaseVNode("span",{"aria-hidden":"true",class:"fa fa-trash-o"},null,-1)])])):createCommentVNode("",!0),createBaseVNode("button",{"aria-label":"Copy Data From",class:"btn btn-outline-secondary",title:"Copy Data From",type:"button",onClick:c[8]||(c[8]=_=>he(!0))},[...c[29]||(c[29]=[createBaseVNode("span",{"aria-hidden":"true",class:"fa fa-copy"},null,-1)])])])):createCommentVNode("",!0)])]),de.value?(openBlock(),createElementBlock("div",_hoisted_11$6,[createBaseVNode("div",_hoisted_12$5,[createBaseVNode("div",_hoisted_13$5,[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(y.value,_=>(openBlock(),createElementBlock("li",{innerHTML:_.message},null,8,_hoisted_14$4))),256))])])])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_15$4,[createBaseVNode("div",_hoisted_16$4,[createBaseVNode("div",_hoisted_17$4,[(openBlock(!0),createElementBlock(Fragment,null,renderList(E.value,_=>(openBlock(),createElementBlock("div",{ref_for:!0,ref:S(_.info.id),class:"col-4"},[createBaseVNode("div",_hoisted_18$3,[createBaseVNode("div",{class:"card-header hook-header",onDblclick:J=>be(_.info.id)},[createBaseVNode("span",_hoisted_20$3,[createBaseVNode("span",{class:normalizeClass("fa hand fa-expand"),title:"Expand/Contract",onClick:J=>De(_.info.id)},null,8,_hoisted_21$3),c[30]||(c[30]=createTextVNode(" ",-1)),createBaseVNode("span",{class:"fa fa-minus hand",title:"Minimize/Maximize",onClick:J=>be(_.info.id)},null,8,_hoisted_22$3)]),createBaseVNode("a",{href:"javascript:void(0)",onClick:J=>m("hook",_.info.id)},toDisplayString(_.info.name),9,_hoisted_23$3)],40,_hoisted_19$3),createBaseVNode("div",{ref_for:!0,ref:v(_.info.id),class:"card-body hook_modules js_modules"},[createBaseVNode("ul",{"data-hook-id":_.info.id,class:"list-group list-group-flush modules-list js_modules js_hook_modules"},[_.modules.length>0?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(_.modules,J=>(openBlock(),createElementBlock("li",{"data-module-id":J.id,class:"js_item"},[createBaseVNode("a",{href:"javascript:void(0)",onClick:Z=>m("module",J.id)},toDisplayString(J.name),9,_hoisted_26$3),se.value?(openBlock(),createElementBlock("span",{key:0,"data-hook-id":_.info.id,class:"js_delete delete hand pull-right fa fa-trash-o",title:"Delete this module from the hook"},null,8,_hoisted_27$3)):createCommentVNode("",!0)],8,_hoisted_25$3))),256)):createCommentVNode("",!0)],8,_hoisted_24$3)],512),Le(_)&&se.value?(openBlock(),createElementBlock("div",_hoisted_28$2,[createBaseVNode("span",{onClick:J=>Me(_.info.id),class:"js_delete_from_hook hand pull-right fa fa-trash-o",title:"Delete all module from this hook","data-hook-id":_.info.id},null,8,_hoisted_29$1)])):createCommentVNode("",!0)])],512))),256)),W.value?(openBlock(),createElementBlock("div",{key:0,ref_key:"savePanel",ref:u,class:"clearboth text-center pt-5"},[createBaseVNode("button",{class:normalizeClass(me.value),type:"button",onClick:c[9]||(c[9]=_=>Ee())}," Save Now! ",2)],512)):createCommentVNode("",!0)])]),de.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_30$1,[createBaseVNode("div",_hoisted_31$1,[createBaseVNode("div",_hoisted_32$1,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":c[10]||(c[10]=_=>O.value=_),"aria-describedby":"basic-addon3",class:"form-control",placeholder:"Search by id, name or alias",type:"text"},null,512),[[vModelText,O.value]])])]),createBaseVNode("ul",_hoisted_33$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(pe.value,_=>(openBlock(),createElementBlock("li",{"data-module-id":_.id,class:"js_item"},[createBaseVNode("span",{innerHTML:_.name},null,8,_hoisted_35$1),c[31]||(c[31]=createBaseVNode("span",{class:"delete hand pull-right fa fa-trash-o"},null,-1))],8,_hoisted_34$1))),256))])]))]),createVNode(_sfc_main$x,{ref_key:"copyBox",ref:i,"data-show-footer":"true","data-modal-css":modalCss},{title:withCtx(()=>[...c[32]||(c[32]=[createTextVNode(" Copy Data ",-1)])]),content:withCtx(()=>[createBaseVNode("div",_hoisted_36$1,[c[37]||(c[37]=createBaseVNode("div",{class:"col-1 p-1"},[createBaseVNode("label",{class:"col-md-3 d-flex"},"From:")],-1)),U.value?(openBlock(),createElementBlock("div",_hoisted_37$1,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":c[11]||(c[11]=_=>R.site_id=_),class:"form-select select-sm"},[c[33]||(c[33]=createBaseVNode("option",{value:"0"},"Select a MicroSite",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(oe.value,_=>(openBlock(),createElementBlock("option",{value:_.id},toDisplayString(_.name),9,_hoisted_38$1))),256))],512),[[vModelSelect,R.site_id]])])):createCommentVNode("",!0),B.value?(openBlock(),createElementBlock("div",_hoisted_39$1,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":c[12]||(c[12]=_=>R.microsite_id=_),class:"form-select select-sm"},[c[34]||(c[34]=createBaseVNode("option",{value:"0"},"Select a Microsite",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(h.value,_=>(openBlock(),createElementBlock("option",{value:_.id},toDisplayString(_.name),9,_hoisted_40$1))),256))],512),[[vModelSelect,R.microsite_id]])])):createCommentVNode("",!0),x.value?(openBlock(),createElementBlock("div",_hoisted_41$1,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":c[13]||(c[13]=_=>R.platform_id=_),class:"form-select select-sm"},[c[35]||(c[35]=createBaseVNode("option",{value:"0"},"Select a Platform",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(k.value,_=>(openBlock(),createElementBlock("option",{value:_.id},toDisplayString(_.name),9,_hoisted_42$1))),256))],512),[[vModelSelect,R.platform_id]])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_43$1,[withDirectives(createBaseVNode("select",{class:"form-select select-sm","onUpdate:modelValue":c[14]||(c[14]=_=>R.category_id=_)},[c[36]||(c[36]=createBaseVNode("option",{value:"0"},"Select a Category",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(ue.value,_=>(openBlock(),createElementBlock("option",{value:_.category_id},toDisplayString(_.name),9,_hoisted_44$1))),256))],512),[[vModelSelect,R.category_id]])])]),createBaseVNode("div",_hoisted_45$1,[c[42]||(c[42]=createBaseVNode("div",{class:"col-1 p-1"},[createBaseVNode("label",{class:"col-md-3 d-flex"},"To:")],-1)),U.value?(openBlock(),createElementBlock("div",_hoisted_46$1,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":c[15]||(c[15]=_=>K.site_id=_),class:"form-select select-sm"},[c[38]||(c[38]=createBaseVNode("option",{value:"0"},"Select a MicroSite",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(oe.value,_=>(openBlock(),createElementBlock("option",{value:_.id},toDisplayString(_.name),9,_hoisted_47$1))),256))],512),[[vModelSelect,K.site_id]])])):createCommentVNode("",!0),B.value?(openBlock(),createElementBlock("div",_hoisted_48$1,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":c[16]||(c[16]=_=>K.microsite_id=_),class:"form-select select-sm"},[c[39]||(c[39]=createBaseVNode("option",{value:"0"},"Select a MicroSite",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(h.value,_=>(openBlock(),createElementBlock("option",{value:_.id},toDisplayString(_.name),9,_hoisted_49$1))),256))],512),[[vModelSelect,K.microsite_id]])])):createCommentVNode("",!0),x.value?(openBlock(),createElementBlock("div",_hoisted_50$1,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":c[17]||(c[17]=_=>K.platform_id=_),class:"form-select select-sm"},[c[40]||(c[40]=createBaseVNode("option",{value:"0"},"Select a Platform",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(k.value,_=>(openBlock(),createElementBlock("option",{value:_.id},toDisplayString(_.name),9,_hoisted_51$1))),256))],512),[[vModelSelect,K.platform_id]])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_52$1,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":c[18]||(c[18]=_=>K.category_id=_),class:"form-select select-sm"},[c[41]||(c[41]=createBaseVNode("option",{value:"0"},"Select a Category",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(_e.value,_=>(openBlock(),createElementBlock("option",{value:_.category_id},toDisplayString(_.name),9,_hoisted_53$1))),256))],512),[[vModelSelect,K.category_id]])])]),createBaseVNode("div",_hoisted_54$1,[withDirectives(createBaseVNode("div",_hoisted_55$1,[...c[43]||(c[43]=[createBaseVNode("div",{class:"alert alert-info"},[createTextVNode(" Please do not select "),createBaseVNode("strong",null,"source platform"),createTextVNode(" if you want to copy modules in all platforms respectively. ")],-1)])],512),[[vShow,x.value]])])]),footer:withCtx(()=>[withDirectives(createBaseVNode("div",_hoisted_56$1,[...c[44]||(c[44]=[createTextVNode(" Please wait... ",-1),createBaseVNode("span",{class:"fa fa-loader"},null,-1)])],512),[[vShow,X.value]]),createBaseVNode("button",{class:"btn btn-success btn-from-submit",onClick:c[19]||(c[19]=_=>Ie())}," Copy Now "),createBaseVNode("button",{class:"btn btn-outline-secondary",onClick:c[20]||(c[20]=_=>he(!1))}," Cancel ")]),_:1},512),createVNode(_sfc_main$x,{ref_key:"deleteBox",ref:$,"data-show-footer":"true","data-title-css":"alert-danger"},{title:withCtx(()=>[...c[45]||(c[45]=[createTextVNode(" Warning!!! ",-1)])]),content:withCtx(()=>[c[47]||(c[47]=createBaseVNode("span",{class:"text-danger"},"Are you sure to delete all modules from this category? Can't be undone.",-1)),createBaseVNode("div",null,[withDirectives(createBaseVNode("label",_hoisted_57$1,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":c[21]||(c[21]=_=>G.value=_),type:"checkbox"},null,512),[[vModelCheckbox,G.value]]),c[46]||(c[46]=createTextVNode(" Delete from other platforms too",-1))],512),[[vShow,x.value]])])]),footer:withCtx(()=>[createBaseVNode("button",{class:"btn btn-danger",onClick:c[22]||(c[22]=_=>Te())}," Yes "),createBaseVNode("button",{class:"btn btn-outline-secondary",onClick:c[23]||(c[23]=_=>Be(!1))}," No ")]),_:1},512),createVNode(_sfc_main$q,{ref_key:"infoPopup",ref:r},null,512)],64))}},_sfc_main$o={__name:"html-slot",setup(w){return onMounted(()=>{}),(e,o)=>(openBlock(),createElementBlock("div",null,[renderSlot(e.$slots,"default")]))}},_hoisted_1$l={class:"row"},_hoisted_2$h={class:"col-auto d-flex"},_hoisted_3$g={class:"row"},_hoisted_4$e={key:0,class:"spinner-border text-info",role:"status"},_hoisted_5$d={class:"col-auto m-1 border"},_hoisted_6$c=["src","onClick"],_hoisted_7$b={key:1},_hoisted_8$9={class:"container-fluid"},_sfc_main$n={__name:"image-gallery",props:["dataModel","dataModuleRelations","dataId","dataEditor"],setup(w,{expose:e}){const o=w,r=ref(null),i=ref([]),$=ref(!1),u=ref(""),p=ref(o.dataEditor);adminConfig.admin_path("gallery/create?return_url="+encodeURIComponent(window.location.href));const n=()=>{i.value=[],$.value=!0;const l=adminConfig.admin_path("gallery/getAllImages");axios$1.get(l).then(f=>{i.value=f.data}).catch(f=>{console.error(f)}).finally(()=>{$.value=!1})},v=l=>adminConfig.get_media(`${l}`),S=l=>{const f=`<img src="${l}" />`;p.value&&p.value.insertContent(f),h()},a=()=>{if(u.value.length>0){i.value=[],$.value=!0;const l=adminConfig.admin_path(`gallery/searchImages/${u.value}`);axios$1.get(l).then(f=>{i.value=f.data}).catch(f=>{console.error(f)}).finally(()=>{$.value=!1})}else n()},g=l=>{n(),l&&(p.value=l),r.value&&r.value.open(),EventBus.emit("image-gallery-open")},h=()=>{r.value&&r.value.close(),EventBus.emit("image-gallery-close")},k=l=>{i.value=[...l.data,...i.value]};return onMounted(()=>{EventBus.on("gallery-image-uploaded",k)}),onBeforeUnmount(()=>{EventBus.off("gallery-image-uploaded",k)}),e({open:g,close:h}),(l,f)=>(openBlock(),createBlock(_sfc_main$x,{ref_key:"imageModalBox",ref:r,"data-show-footer":"true"},{title:withCtx(()=>[createBaseVNode("div",_hoisted_1$l,[f[1]||(f[1]=createBaseVNode("div",{class:"col-2"},"Gallery",-1)),createBaseVNode("div",_hoisted_2$h,[withDirectives(createBaseVNode("input",{type:"text",class:"form-control me-1",placeholder:"Search image",onKeydown:withKeys(a,["enter"]),"onUpdate:modelValue":f[0]||(f[0]=D=>u.value=D)},null,544),[[vModelText,u.value]]),createBaseVNode("input",{type:"button",class:"btn btn-secondary me-1",value:"Search",onClick:a})])])]),content:withCtx(()=>[createBaseVNode("div",_hoisted_3$g,[$.value?(openBlock(),createElementBlock("span",_hoisted_4$e,[...f[2]||(f[2]=[createBaseVNode("span",{class:"visually-hidden"},"Loading...",-1)])])):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(i.value,D=>(openBlock(),createElementBlock("div",_hoisted_5$d,[createBaseVNode("img",{src:v(D.path),width:"100",onClick:F=>S(v(D.path))},null,8,_hoisted_6$c)]))),256)),i.value.length===0&&$.value===!1?(openBlock(),createElementBlock("div",_hoisted_7$b,"No images found")):createCommentVNode("",!0)])]),footer:withCtx(()=>[createBaseVNode("div",_hoisted_8$9,[createVNode(_sfc_main$t,{"data-accept":"image/*"})])]),_:1},512))}},_hoisted_1$k={class:"card mb-3 shadow info-box"},_hoisted_2$g={class:"card-body"},_hoisted_3$f={class:"card-title"},_hoisted_4$d=["href"],_hoisted_5$c=["innerHTML"],_hoisted_6$b={key:1,class:"info-box-text"},_hoisted_7$a={key:0,class:"card-text text-center"},_sfc_main$m={__name:"info-box",props:["dataInfo","dataColorIndex","dataSubTitle","dataTitle","dataIconCss","dataLink"],setup(w){const e=w,o=ref(SafeJsonParse(e.dataInfo,null)),r=ref(typeof e.dataSubTitle<"u"?e.dataSubTitle:""),i=ref(e.dataIconCss),$=ref(e.dataLink===void 0?"":e.dataLink),u=computed(()=>o.value!==null?o.value.name||o.value.title:e.dataTitle),p=computed(()=>(i.value===void 0||i.value==="")&&o.value!==null?o.value.icon_css||o.value.iconCss:i.value),n=()=>o.value?.icon_css||i.value===void 0?u.value.replace(/[^a-zA-Z- ]/g,"").match(/\b\w/g).join(""):"",v=()=>{Store.fetch("counter")===void 0&&Store.store("counter",1);let a=Store.fetch("counter");return a>10&&(a=1),Store.store("counter",a+1),a},S=()=>`color-${e.dataColorIndex?e.dataColorIndex:v()}`;return(a,g)=>(openBlock(),createElementBlock("div",_hoisted_1$k,[createBaseVNode("span",{class:normalizeClass(S()+" info-box-icon")},[createBaseVNode("i",{style:{"font-style":"normal"},class:normalizeClass(p.value)},toDisplayString(n()),3)],2),createBaseVNode("div",_hoisted_2$g,[createBaseVNode("h5",_hoisted_3$f,[$.value!==""?(openBlock(),createElementBlock("a",{key:0,href:$.value,class:"info-box-text"},[createBaseVNode("span",{class:"info-box-text",innerHTML:u.value},null,8,_hoisted_5$c)],8,_hoisted_4$d)):createCommentVNode("",!0),$.value===""?(openBlock(),createElementBlock("span",_hoisted_6$b,toDisplayString(u.value),1)):createCommentVNode("",!0)]),r.value!==""?(openBlock(),createElementBlock("p",_hoisted_7$a,toDisplayString(r.value),1)):createCommentVNode("",!0)])]))}},_hoisted_1$j=["onClick","title"],_sfc_main$l={__name:"info-boxes",props:["dataModules","dataModulesAllowed","dataIsAdmin"],setup(w){const e=w,o=ref(SafeJsonParse(e.dataModulesAllowed,[])),r=computed(()=>SafeJsonParse(e.dataModules,[]).child||[]),i=u=>{window.location=adminConfig.admin_path(u.controller_name)},$=u=>{if(e.dataIsAdmin.toString()==="1")return!0;for(let p=0;p<o.value.length;p++)if(o.value[p].module_id==u)return!0;return!1};return(u,p)=>(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,(n,v)=>(openBlock(),createElementBlock(Fragment,null,[$(n.id)?(openBlock(),createElementBlock("div",{key:0,class:"col-auto hand",onClick:S=>i(n),title:n.name},[(openBlock(),createBlock(_sfc_main$m,{key:n.name+v,"data-title":n.name,"data-sub-title":n.sub_title,"data-icon-css":n.icon_css},null,8,["data-title","data-sub-title","data-icon-css"]))],8,_hoisted_1$j)):createCommentVNode("",!0)],64))),256))}},_hoisted_1$i={class:"col-lg-6"},_hoisted_2$f={class:"mb-2"},_hoisted_3$e=["value"],_hoisted_4$c={class:"text text-danger"},_hoisted_5$b={class:"mb-2"},_hoisted_6$a=["value"],_hoisted_7$9={class:"text text-danger"},_hoisted_8$8={class:"mb-2"},_hoisted_9$8={class:"text text-danger"},_hoisted_10$7={class:"row"},_sfc_main$k={__name:"language-copier",props:["dataLanguages","dataLanguageTables"],setup(w){const e=w,o=getCurrentInstance(),r=ref(SafeJsonParse(e.dataLanguages,[])),i=ref(SafeJsonParse(e.dataLanguageTables,[])),$=ref([]),u=reactive(new Form({tables:[],sourceLang:"",targetLang:""})),p=reactive({}),n=ref("language/translateNow"),v=ref(""),S=l=>l.status===0?"text text-danger":"text text-success",a=l=>{for(let f in l.errors)Object.prototype.hasOwnProperty.call(l.errors,f)&&(p[f]=l.errors[f][0]);v.value=l.message},g=l=>{const f=l.target.getAttribute("name");p[f]="",v.value!==""&&(v.value="")},h=l=>{console.log(l),l.isSaved===0?(Toast.show(o,l.message),v.value=l.message):(v.value="",$.value=l.message)},k=()=>{const l=adminConfig.admin_path(n.value);return u.post(l).then(f=>h(f)).catch(f=>a(f)),!1};return(l,f)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$i,[createBaseVNode("form",{id:"addEditFrm",method:"post",class:"form-horizontal",role:"form",onSubmit:withModifiers(k,["prevent"]),onKeyup:f[6]||(f[6]=D=>g(D))},[createBaseVNode("div",null,[createBaseVNode("div",_hoisted_2$f,[f[8]||(f[8]=createBaseVNode("p",null,[createBaseVNode("strong",null,"Source Language:"),createTextVNode(" Data will be copied from the selected lanuage ")],-1)),withDirectives(createBaseVNode("select",{required:"",name:"sourceLang",class:"form-select","onUpdate:modelValue":f[0]||(f[0]=D=>u.sourceLang=D),onChange:f[1]||(f[1]=D=>g(D))},[f[7]||(f[7]=createBaseVNode("option",{value:""},"Select",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,D=>(openBlock(),createElementBlock("option",{value:D.id},toDisplayString(D.name)+" - "+toDisplayString(D.iso_code),9,_hoisted_3$e))),256))],544),[[vModelSelect,u.sourceLang]]),createBaseVNode("div",_hoisted_4$c,toDisplayString(p.sourceLang),1)])]),createBaseVNode("div",null,[createBaseVNode("div",_hoisted_5$b,[f[10]||(f[10]=createBaseVNode("p",null,[createBaseVNode("strong",null,"Target Language:"),createTextVNode(" New record will be inserted with this language id in selected tables ")],-1)),withDirectives(createBaseVNode("select",{required:"",name:"targetLang",class:"form-select","onUpdate:modelValue":f[2]||(f[2]=D=>u.targetLang=D),onChange:f[3]||(f[3]=D=>g(D))},[f[9]||(f[9]=createBaseVNode("option",{value:""},"Select",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,D=>(openBlock(),createElementBlock("option",{value:D.id},toDisplayString(D.name)+" - "+toDisplayString(D.iso_code),9,_hoisted_6$a))),256))],544),[[vModelSelect,u.targetLang]]),createBaseVNode("div",_hoisted_7$9,toDisplayString(p.targetLang),1)])]),createBaseVNode("div",null,[createBaseVNode("div",_hoisted_8$8,[f[11]||(f[11]=createBaseVNode("p",null,"Select tables",-1)),withDirectives(createBaseVNode("select",{required:"",style:{height:"200px"},name:"tables",class:"form-select",multiple:"","onUpdate:modelValue":f[4]||(f[4]=D=>u.tables=D),onChange:f[5]||(f[5]=D=>g(D))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.value,D=>(openBlock(),createElementBlock("option",null,toDisplayString(D.name),1))),256))],544),[[vModelSelect,u.tables]]),createBaseVNode("div",_hoisted_9$8,toDisplayString(p.tables),1)])]),createBaseVNode("div",_hoisted_10$7,[withDirectives(createBaseVNode("div",{class:"alert alert-danger"},toDisplayString(v.value),513),[[vShow,typeof v.value=="string"&&v.value!=""]]),(openBlock(!0),createElementBlock(Fragment,null,renderList($.value,D=>(openBlock(),createElementBlock("div",{class:normalizeClass(S(D))},toDisplayString(D.message),3))),256)),f[12]||(f[12]=createBaseVNode("div",{class:"form-group center-align"},[createBaseVNode("input",{type:"submit",name:"submit",value:"Submit and Hold on",class:"btn btn-success btn-large"})],-1))])],32)])]))}},_hoisted_1$h={class:"d-flex flex-column flex-shrink-0 t_left js_left_menu"},_hoisted_2$e={class:"list-unstyled ps-0"},_hoisted_3$d={key:0},_hoisted_4$b=["title","href"],_hoisted_5$a=["title","href"],_hoisted_6$9={class:"dropdown"},_hoisted_7$8=["href"],_sfc_main$j={__name:"left-nav",props:["dataList","dataControllerName","dataModulesAllowed","dataIsAdmin","dataHashtagcmsVersion"],setup(w){const e=w,o=ref(SafeJsonParse(e.dataList,[]));ref(SafeJsonParse(e.dataModulesAllowed,[]));const r=computed(()=>`https://www.hashtagcms.org/?utm_src=${encodeURIComponent(window.location.href)}`),i=S=>S.child&&S.child.length>0,$=(S,a)=>{if(e.dataControllerName===S)return!0;if(a&&a.child&&a.child.length>0){const g=e.dataControllerName;return a.child.some(h=>h.controller_name===g)}return!1},u=(S,a)=>$(S,a)?"active":"",p=S=>adminConfig.admin_path(S.controller_name),n=()=>{document.querySelectorAll(".js_left_menu .js_child").forEach(S=>{S.classList.remove("active","animated","fadeIn")})},v=S=>{n();const a=S.target;if(a.classList.contains("js_more")){S.preventDefault();const g=a.parentElement.nextElementSibling;g&&g.classList.add("active","animated","fadeIn")}};return(S,a)=>(openBlock(),createElementBlock("div",_hoisted_1$h,[createBaseVNode("ul",_hoisted_2$e,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.value,g=>(openBlock(),createElementBlock(Fragment,null,[g.parent_id===0?(openBlock(),createElementBlock("li",_hoisted_3$d,[createBaseVNode("a",{title:g.sub_title,href:p(g),class:normalizeClass("text-white "+u(g.controller_name,g)),"aria-expanded":"true"},[i(g)?(openBlock(),createElementBlock("i",{key:0,class:"js_more fa fa-ellipsis-v pull-right adjustMore",onClick:a[0]||(a[0]=h=>v(h))})):createCommentVNode("",!0),createBaseVNode("i",{class:normalizeClass(g.icon_css+" fa-icons"),"aria-hidden":"true"},null,2),createTextVNode(" "+toDisplayString(g.name),1)],10,_hoisted_4$b),i(g)?(openBlock(),createElementBlock("ul",{key:0,class:normalizeClass("js_child btn-toggle-nav list-unstyled fw-normal "+u(g.controller_name,g))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(g.child,h=>(openBlock(),createElementBlock("li",null,[createBaseVNode("a",{title:h.sub_title,href:p(h),class:normalizeClass("text-white "+u(h.controller_name,h))},[createBaseVNode("i",{class:normalizeClass(h.icon_css+" fa-icons"),"aria-hidden":"true"},null,2),createTextVNode(" "+toDisplayString(h.name),1)],10,_hoisted_5$a)]))),256))],2)):createCommentVNode("",!0)])):createCommentVNode("",!0)],64))),256))]),a[1]||(a[1]=createBaseVNode("hr",null,null,-1)),createBaseVNode("div",_hoisted_6$9,[createBaseVNode("a",{title:"Open HashtagCms.org",href:r.value,target:"_blank",class:"d-flex align-items-center text-light text-decoration-none","data-bs-toggle":"dropdown","aria-expanded":"false"},[createBaseVNode("strong",null,"v"+toDisplayString(w.dataHashtagcmsVersion),1)],8,_hoisted_7$8)])]))}},_hoisted_1$g={key:0},_hoisted_2$d={class:"sortable-list js_sortable"},_hoisted_3$c=["data-id"],_hoisted_4$a=["innerHTML"],_hoisted_5$9={key:0,class:"inline"},_hoisted_6$8=["for"],_hoisted_7$7=["id"],_hoisted_8$7={class:"child accordion-body js_sortable"},_hoisted_9$7=["data-id"],_hoisted_10$6={key:1,class:"center-align mt-3"},_sfc_main$i={__name:"menu-sorter",props:["dataAllData","dataFields","dataControllerName","dataControllerChildName","dataGroups","dataGroupName","dataShowGroups"],setup(w,{expose:e}){const o=w,r=getCurrentInstance(),i=ref(SafeJsonParse(o.dataAllData,[])),$=ref(SafeJsonParse(o.dataGroups,[])),u=ref(o.dataGroupName&&o.dataGroupName!==""?o.dataGroupName:""),p=ref(!!(o.dataShowGroups&&o.dataShowGroups==="true")),n=computed(()=>{let V=SafeJsonParse(o.dataFields,null);return V===null&&(V={id:"id",label:"name",isImage:!1}),V}),v=computed(()=>(typeof o.dataControllerName>"u"?"":o.dataControllerName.toLowerCase()).replace(/\s/g,"")),S=computed(()=>(typeof o.dataControllerChildName>"u"?"":o.dataControllerChildName.toLowerCase()).replace(/\s/g,"")),a=computed(()=>{let V=0;for(let E=0;E<$.value.length;E++)if($.value[E]===u.value){V=E;break}return V}),g=V=>V.parent_id===0||!V.parent_id,h=V=>{window.location.href=adminConfig.admin_path(`${v.value}/sort/${V.value}`)},k=V=>V.child&&V.child.length>0,l=V=>{if(n.value.isImage===!0){let E=V[n.value.label]?adminConfig.get_media(V[n.value.label]):adminConfig.get_media(V.lang[n.value.label]);return`<a href='${E}' target='_blank'><img height='30' src='${E}' /></a>`}else return V[n.value.label]?V[n.value.label]:V.lang[n.value.label]},f=V=>V[n.value.id],D=(V,E)=>{Toast.show(r,`${E.toUpperCase()} Sorted.`)},F=V=>{Toast.show(r,V?.statusText||"There is some error! Don't know the reason",5e3),console.log(V)},N=(V,E,b,s)=>(Loader.show(r,"Please wait. Saving sorting data..."),new Promise((y,j)=>{axios[V](E,b).then(O=>{D(O,s),y(O)}).catch(O=>{F(SafeErrorData(O)),j(O)}).finally(()=>{Loader.hide(r)})})),C=(V=!1)=>{const E=document.querySelectorAll(".item"),b=[];let s=v.value,y=S.value==="";s=V===!0?v.value:S.value!==""?S.value:v.value;let j=1;E.forEach(G=>{if(y===!0){const R=G.getAttribute("data-id");b.push({position:j,where:{id:parseInt(R)}}),j++}else{const R=G.getAttribute("data-is-parent"),K=G.getAttribute("data-id");V.toString()===R.toString()&&(b.push({position:j,where:{id:parseInt(K)}}),j++)}});const O=adminConfig.admin_path(`${s}/updateIndex`);N("post",O,b,s)},M=()=>{nextTick(()=>{document.querySelectorAll(".js_sortable").forEach(E=>{Sortable.create(E,{animation:500,ghostClass:"text-danger",onUpdate:b=>{}})})})};return e({setData:V=>{i.value=V}}),onMounted(()=>{M()}),(V,E)=>(openBlock(),createElementBlock("div",null,[p.value?(openBlock(),createElementBlock("h4",_hoisted_1$g,[E[1]||(E[1]=createTextVNode(" Arrange Menus ",-1)),createVNode(_sfc_main$C,{"data-options":$.value,onChange:h,"data-selected":a.value},null,8,["data-options","data-selected"])])):createCommentVNode("",!0),createBaseVNode("ul",_hoisted_2$d,[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.value,(b,s)=>(openBlock(),createElementBlock(Fragment,null,[g(b)?(openBlock(),createElementBlock("li",{key:0,"data-is-parent":"true",class:"item","data-id":f(b)},[createBaseVNode("span",{innerHTML:l(b)},null,8,_hoisted_4$a),k(b)?(openBlock(),createElementBlock("div",_hoisted_5$9,[createBaseVNode("label",{for:"item_"+s,class:"accordion-header pull-right"},[...E[2]||(E[2]=[createBaseVNode("span",{class:"fa fa-ellipsis-v ellipsis"},null,-1)])],8,_hoisted_6$8),createBaseVNode("input",{id:"item_"+s,type:"checkbox",class:"accordion-control"},null,8,_hoisted_7$7),createBaseVNode("ul",_hoisted_8$7,[(openBlock(!0),createElementBlock(Fragment,null,renderList(b.child,y=>(openBlock(),createElementBlock("li",{"data-is-parent":"false",class:"item","data-id":f(y)},toDisplayString(l(y)),9,_hoisted_9$7))),256))])])):createCommentVNode("",!0)],8,_hoisted_3$c)):createCommentVNode("",!0)],64))),256))]),i.value.length>1?(openBlock(),createElementBlock("div",_hoisted_10$6,[createBaseVNode("input",{type:"button",class:"btn btn-success btn-from-submit",value:"Save",onClick:E[0]||(E[0]=b=>C())})])):createCommentVNode("",!0)]))}},_hoisted_1$f=["action"],_hoisted_2$c={class:"form-group row"},_hoisted_3$b={class:"col-sm-10"},_hoisted_4$9={class:"form-group row"},_hoisted_5$8={class:"col-sm-7"},_hoisted_6$7={class:"text text-danger"},_hoisted_7$6={class:"form-group row"},_hoisted_8$6={class:"col-sm-7"},_hoisted_9$6={class:"text text-danger"},_hoisted_10$5={class:"form-group row"},_hoisted_11$5={class:"col-sm-7"},_hoisted_12$4={class:"text text-danger"},_hoisted_13$4={class:"form-group row"},_hoisted_14$3={class:"col-sm-7"},_hoisted_15$3=["value"],_hoisted_16$3={class:"text text-danger"},_hoisted_17$3={class:"form-group row"},_hoisted_18$2={class:"col-sm-7"},_hoisted_19$2={class:"text text-danger"},_hoisted_20$2={class:"form-group row"},_hoisted_21$2={class:"col-sm-7"},_hoisted_22$2={class:"text text-danger"},_hoisted_23$2={class:"form-group row"},_hoisted_24$2={class:"col-sm-7"},_hoisted_25$2={class:"text text-danger"},_hoisted_26$2={key:0},_hoisted_27$2={class:"form-group row"},_hoisted_28$1={class:"col-sm-7"},_hoisted_29=["value"],_hoisted_30={class:"col-sm-5"},_hoisted_31={key:0,class:"models"},_hoisted_32={class:"form-group row"},_hoisted_33={class:"col-sm-7"},_hoisted_34=["value"],_hoisted_35={key:0,class:"fieldset"},_hoisted_36={class:"models_row"},_hoisted_37={class:"models"},_hoisted_38=["value","onChange"],_hoisted_39=["onChange"],_hoisted_40=["onUpdate:modelValue"],_hoisted_41=["onClick"],_hoisted_42={key:0,class:"row"},_hoisted_43={key:1,class:"form-group row"},_hoisted_44={class:"col-auto"},_hoisted_45={class:"card shadow-sm models-box"},_hoisted_46={class:"card-header"},_hoisted_47={class:"card-body p-0 m-0 tables_panel"},_hoisted_48={class:"list-group list-group-flush"},_hoisted_49=["onClick"],_hoisted_50={class:"col-auto"},_hoisted_51={class:"card shadow-sm models-box"},_hoisted_52={class:"card-header"},_hoisted_53=["onClick"],_hoisted_54={class:"card-body p-0 m-0 tables_panel"},_hoisted_55={class:"list-group list-group-flush"},_hoisted_56=["onClick"],_hoisted_57={key:2,class:"row mt-3"},_hoisted_58={class:"col"},_hoisted_59={class:"card shadow-sm"},_hoisted_60={class:"card-header"},_hoisted_61={class:"card-body"},_hoisted_62={id:"selectedFields"},_hoisted_63=["data-fieldname"],_hoisted_64=["onClick"],_hoisted_65={class:"row mt-3"},_hoisted_66={key:0,class:"alert alert-danger"},_hoisted_67={class:"form-group center-align"},_hoisted_68=["href"],_sfc_main$h={__name:"module-creator",props:["dataDatabaseTables","dataControllerName","dataBackUrl","dataCmsModules"],setup(w){const e=w,o=getCurrentInstance(),r=U=>new Promise((B,x)=>{axios$1.get(`getFields?table=${U}`).then(W=>B(W)).catch(W=>x(W))}),i=ref(SafeJsonParse(e.dataDatabaseTables,[])),$=ref(SafeJsonParse(e.dataCmsModules,[])),u=reactive({tableName:"",fields:[],modelName:"",selected:[]}),p=reactive({tableName:"",models:[]}),n=reactive(new Form({name:"",controller_name:"",validator_name:"",dataWith:[],dataSource:"",createFiles:!0,selectedFields:[],relationModels:[],parent_id:"",display_name:"",sub_title:"",icon_css:"",list_view_name:"",edit_view_name:""})),v=ref({}),S=reactive({});let a=null;const g=ref(""),h=computed(()=>adminConfig.admin_path(`${e.dataControllerName}/createModule`)),k=(U="")=>{U!==""&&axios$1.get(`isControllerExists?name=${U}`).then(B=>{B.data===1&&Toast.show(o,"Controller already exist")})},l=U=>{let B=U||n.name;B=B.toLowerCase().replace(/\s/g,""),n.controller_name=pluralize.singular(B),n.validator_name=n.controller_name,U!==void 0&&k(n.controller_name),n.icon_css=n.controller_name},f=(U="")=>{let x=(pluralize.singular(U)+"::class").split("_");return x=x.map(W=>W.charAt(0).toUpperCase()+W.slice(1)),x.join("")},D=()=>{u.tableName!==""&&(u.fields=["Please wait..."],r(u.tableName).then(U=>{u.fields=U.data}),u.modelName=f(u.tableName),n.dataSource=u.modelName)},F=()=>{n.dataWith=[],p.models.forEach(U=>{n.dataWith.includes(U.relationAlias)||n.dataWith.push(U.relationAlias)})},N=U=>S[U]!==void 0,C=()=>{if(p.tableName!==""){const U=p.tableName,B=f(U);if(!N(B)){let x="";U.endsWith("_langs")||U.endsWith("_sites")?x=U.endsWith("_langs")?"lang":"site":x=pluralize.singular(U.replace(/_/g,"")).toLowerCase();const se={model:B,relationAlias:x,relationType:"hasMany",isLanguage:x==="lang",fields:[],selected:[]};S[B]||(p.models.push(se),S[B]=se,S[B].fields=["Please wait..."],r(U).then(ue=>{S[B].fields=ue.data})),F()}}},M=U=>{u.selected.length>0&&(u.selected=u.selected.filter(B=>!B.startsWith(`${U}.`)))},L=(U,B,x)=>{const W=p.models[B][x];p.models[B][x]=U.target.value,x==="relationAlias"&&(p.models[B].selected=[],M(W)),F()},V=(U,B)=>{const x=p.models[U].relationAlias;delete S[B],p.models.splice(U,1),p.tableName="",M(x)},E=()=>p.models.length>0,b=()=>u.tableName!=="",s=()=>{},y=()=>{},j=()=>{nextTick(()=>{a?.destroy();const U=document.getElementById("selectedFields");U&&(a=Sortable.create(U,{onEnd:y,onStart:s}))})},O=(U,B,x="")=>{const W=x!==""?`${x}.${U}`:U;B.selected.includes(W)||B.selected.push(W),j()},G=(U,B="")=>{U.selected.length===0?U.selected=U.fields.map(x=>B!==""?`${B}.${x}`:x):U.fields.forEach(x=>O(x,U,B)),j()},R=(U,B)=>{U.selected.splice(B,1)},K=U=>{U.selected=[],n.selectedFields=[]},X=()=>{const U=document.querySelectorAll("#selectedFields li");if(U.length>1){const x=[];U.forEach(W=>{const Y=W.getAttribute("data-fieldname");x.push(Y)}),n.selectedFields=x}},Q=U=>{if(v.value={},U.errors)for(let B in U.errors)Object.prototype.hasOwnProperty.call(U.errors,B)&&(v.value[B]=U.errors[B][0]);g.value=U.message},re=U=>{u.tableName="",u.fields=[],u.modelName="",u.selected=[],p.tableName="",p.models=[],U.created===0?(Toast.show(o,"There is some error..."),g.value=U.message):Toast.show(o,"Created...")},le=()=>{X(),n.relationModels=p,n.post(h.value).then(U=>re(U)).catch(U=>Q(U))},oe=U=>{const B=U.target.getAttribute("name");B&&(v.value[B]=""),g.value!==""&&(g.value="")};return(U,B)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("form",{action:h.value,class:"form-horizontal",method:"post",role:"form",onKeyup:B[17]||(B[17]=x=>oe(x)),onSubmit:withModifiers(le,["prevent"])},[createBaseVNode("div",_hoisted_2$c,[createBaseVNode("label",_hoisted_3$b,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":B[0]||(B[0]=x=>n.createFiles=x),type:"checkbox",name:"create-validator"},null,512),[[vModelCheckbox,n.createFiles]]),B[18]||(B[18]=createTextVNode(" Create Files (Controller/Model/View/Vaidator) - ",-1)),B[19]||(B[19]=createBaseVNode("small",{class:"text-info"},"Try creating it from terminal command. It might not work due to rights",-1))])]),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":B[1]||(B[1]=x=>n.display_name=x),type:"hidden"},null,512),[[vModelText,n.display_name]]),createBaseVNode("div",_hoisted_4$9,[B[20]||(B[20]=createBaseVNode("label",{class:"col-sm-3"},"Name",-1)),createBaseVNode("div",_hoisted_5$8,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":B[2]||(B[2]=x=>n.name=x),class:"form-control",name:"name",placeholder:"Module name",required:"",type:"text",onBlur:B[3]||(B[3]=x=>l())},null,544),[[vModelText,n.name]]),createBaseVNode("div",_hoisted_6$7,toDisplayString(this.errors.name),1)])]),createBaseVNode("div",_hoisted_7$6,[B[21]||(B[21]=createBaseVNode("label",{class:"col-sm-3"},"Sub Title",-1)),createBaseVNode("div",_hoisted_8$6,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":B[4]||(B[4]=x=>n.sub_title=x),class:"form-control",name:"name",placeholder:"Sub title",type:"text"},null,512),[[vModelText,n.sub_title]]),createBaseVNode("div",_hoisted_9$6,toDisplayString(this.errors.sub_title),1)])]),createBaseVNode("div",_hoisted_10$5,[B[22]||(B[22]=createBaseVNode("label",{class:"col-sm-3"},"Controller Name (link rewrite)",-1)),createBaseVNode("div",_hoisted_11$5,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":B[5]||(B[5]=x=>n.controller_name=x),class:"form-control",name:"controller_name",placeholder:"Controller name",required:"",type:"text",onBlur:B[6]||(B[6]=x=>l(n.controller_name))},null,544),[[vModelText,n.controller_name]]),createBaseVNode("div",_hoisted_12$4,toDisplayString(this.errors.controller_name),1)])]),createBaseVNode("div",_hoisted_13$4,[B[24]||(B[24]=createBaseVNode("label",{class:"col-sm-3"},"Parent",-1)),createBaseVNode("div",_hoisted_14$3,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":B[7]||(B[7]=x=>n.parent_id=x),class:"form-select select-big"},[B[23]||(B[23]=createBaseVNode("option",{value:""},"Select",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList($.value,x=>(openBlock(),createElementBlock("option",{value:x.id},toDisplayString(x.name),9,_hoisted_15$3))),256))],512),[[vModelSelect,n.parent_id]]),createBaseVNode("div",_hoisted_16$3,toDisplayString(this.errors.parent_id),1)])]),createBaseVNode("div",_hoisted_17$3,[B[25]||(B[25]=createBaseVNode("label",{class:"col-sm-3"},"Icon CSS",-1)),createBaseVNode("div",_hoisted_18$2,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":B[8]||(B[8]=x=>n.icon_css=x),class:"form-control",name:"name",placeholder:"Icon CSS",required:"",type:"text"},null,512),[[vModelText,n.icon_css]]),createBaseVNode("div",_hoisted_19$2,toDisplayString(this.errors.icon_css),1)])]),createBaseVNode("div",_hoisted_20$2,[B[26]||(B[26]=createBaseVNode("label",{class:"col-sm-3"},"List View Name",-1)),createBaseVNode("div",_hoisted_21$2,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":B[9]||(B[9]=x=>n.list_view_name=x),class:"form-control",name:"name",placeholder:"Enter list view Name (Default list view is common/listing)",type:"text"},null,512),[[vModelText,n.list_view_name]]),createBaseVNode("div",_hoisted_22$2,toDisplayString(this.errors.list_view_name),1)])]),createBaseVNode("div",_hoisted_23$2,[B[27]||(B[27]=createBaseVNode("label",{class:"col-sm-3"},"Edit View Name",-1)),createBaseVNode("div",_hoisted_24$2,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":B[10]||(B[10]=x=>n.edit_view_name=x),class:"form-control",name:"name",placeholder:"Edit list view Name (Default edit view is addedit)",type:"text"},null,512),[[vModelText,n.edit_view_name]]),createBaseVNode("div",_hoisted_25$2,toDisplayString(this.errors.edit_view_name),1)])]),n.createFiles?(openBlock(),createElementBlock("div",_hoisted_26$2,[createBaseVNode("div",_hoisted_27$2,[B[29]||(B[29]=createBaseVNode("label",{class:"col-sm-3"},"Data Source",-1)),createBaseVNode("div",_hoisted_28$1,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":B[11]||(B[11]=x=>u.tableName=x),class:"form-select select-big",onChange:B[12]||(B[12]=x=>D())},[B[28]||(B[28]=createBaseVNode("option",{value:""},"Select",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(i.value,x=>(openBlock(),createElementBlock("option",{value:x.name},toDisplayString(x.name),9,_hoisted_29))),256))],544),[[vModelSelect,u.tableName]]),createBaseVNode("div",_hoisted_30,[u.tableName!=""?(openBlock(),createElementBlock("span",_hoisted_31,toDisplayString(f(u.tableName)),1)):createCommentVNode("",!0)])])]),createBaseVNode("div",_hoisted_32,[B[34]||(B[34]=createBaseVNode("label",{class:"col-sm-3"},"Data with? Choose another model.",-1)),createBaseVNode("div",_hoisted_33,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":B[13]||(B[13]=x=>p.tableName=x),class:"form-select select-big",onChange:B[14]||(B[14]=x=>C())},[B[30]||(B[30]=createBaseVNode("option",{value:""},"Select",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(i.value,x=>(openBlock(),createElementBlock("option",{value:x.name},toDisplayString(x.name),9,_hoisted_34))),256))],544),[[vModelSelect,p.tableName]]),createBaseVNode("div",null,[E()?(openBlock(),createElementBlock("fieldset",_hoisted_35,[B[33]||(B[33]=createBaseVNode("legend",{class:"small legendTitle"},"Relation Models",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(p.models,(x,W)=>(openBlock(),createElementBlock("div",_hoisted_36,[createBaseVNode("span",_hoisted_37,[createTextVNode(toDisplayString(x.model)+" ",1),createBaseVNode("input",{value:x.relationAlias,name:"relation",placeholder:"Relation name",type:"text",onChange:Y=>L(Y,W,"relationAlias")},null,40,_hoisted_38),createBaseVNode("select",{class:"select",name:"relationType",onChange:Y=>L(Y,W,"relationType")},[...B[31]||(B[31]=[createBaseVNode("option",{value:"hasMany"},"hasMany",-1),createBaseVNode("option",{value:"belongsTo"},"belongsTo",-1),createBaseVNode("option",{value:"hasOne"},"hasOne",-1)])],40,_hoisted_39),B[32]||(B[32]=createTextVNode(" isLanguage: ",-1)),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":Y=>x.isLanguage=Y,type:"checkbox",name:"relationModel"},null,8,_hoisted_40),[[vModelCheckbox,x.isLanguage]]),createBaseVNode("span",{class:"small fa fa-close",onClick:Y=>V(W,x.model)},null,8,_hoisted_41)])]))),256))])):createCommentVNode("",!0)])])]),b()?(openBlock(),createElementBlock("div",_hoisted_42,[...B[35]||(B[35]=[createBaseVNode("strong",null,"Click on fields to choose",-1)])])):createCommentVNode("",!0),b()?(openBlock(),createElementBlock("div",_hoisted_43,[createBaseVNode("div",_hoisted_44,[createBaseVNode("div",_hoisted_45,[createBaseVNode("div",_hoisted_46,[createBaseVNode("span",{class:"text-small pull-right hand text-success",onClick:B[15]||(B[15]=x=>G(u))},"Add all "),createTextVNode(toDisplayString(f(u.tableName)),1),B[36]||(B[36]=createBaseVNode("br",null,null,-1))]),createBaseVNode("div",_hoisted_47,[createBaseVNode("ul",_hoisted_48,[(openBlock(!0),createElementBlock(Fragment,null,renderList(u.fields,x=>(openBlock(),createElementBlock("li",{class:"list-group-item",onClick:W=>O(x,u)},toDisplayString(x),9,_hoisted_49))),256))])])])]),E()?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(p.models,(x,W)=>(openBlock(),createElementBlock("div",_hoisted_50,[createBaseVNode("div",_hoisted_51,[createBaseVNode("div",_hoisted_52,[createBaseVNode("span",{class:"text-small pull-right hand text-success",onClick:Y=>G(u,x.relationAlias)},"Add all ",8,_hoisted_53),createTextVNode(toDisplayString(x.model),1),B[37]||(B[37]=createBaseVNode("br",null,null,-1)),createTextVNode("->with['"+toDisplayString(x.relationAlias)+"'] ",1)]),createBaseVNode("div",_hoisted_54,[createBaseVNode("ul",_hoisted_55,[(openBlock(!0),createElementBlock(Fragment,null,renderList(x.fields,Y=>(openBlock(),createElementBlock("li",{class:"list-group-item",onClick:se=>O(Y,u,x.relationAlias)},toDisplayString(Y),9,_hoisted_56))),256))])])])]))),256)):createCommentVNode("",!0)])):createCommentVNode("",!0),u.selected.length>0?(openBlock(),createElementBlock("div",_hoisted_57,[createBaseVNode("div",_hoisted_58,[createBaseVNode("div",_hoisted_59,[createBaseVNode("div",_hoisted_60,[B[38]||(B[38]=createTextVNode(" Selected Fields ",-1)),createBaseVNode("span",{class:"text-small pull-right hand text-danger",onClick:B[16]||(B[16]=x=>K(u))},"Remove all")]),createBaseVNode("div",_hoisted_61,[createBaseVNode("ul",_hoisted_62,[(openBlock(!0),createElementBlock(Fragment,null,renderList(u.selected,(x,W)=>(openBlock(),createElementBlock("li",{class:"fields non-selectable","data-fieldname":x},[createTextVNode(toDisplayString(x)+" ",1),createBaseVNode("span",{class:"small fa fa-close",onClick:Y=>R(u,W)},null,8,_hoisted_64)],8,_hoisted_63))),256))])])])])])):createCommentVNode("",!0)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_65,[g.value!==""?(openBlock(),createElementBlock("div",_hoisted_66,toDisplayString(g.value),1)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_67,[B[39]||(B[39]=createBaseVNode("input",{class:"btn btn-success btn-from-submit",name:"submit",type:"submit",value:"Save"},null,-1)),createBaseVNode("a",{href:w.dataBackUrl,class:"btn btn-outline-secondary"},"Cancel",8,_hoisted_68)])])],40,_hoisted_1$f)]))}},_hoisted_1$e={key:0,class:"alert alert-info"},_hoisted_2$b={key:1,class:"row"},_hoisted_3$a={class:"form-group center-align"},_hoisted_4$8=["href"],_hoisted_5$7=["action"],_hoisted_6$6={class:"checkbox title"},_hoisted_7$5={class:"text-info"},_hoisted_8$5={class:"list-unstyled list-permission"},_hoisted_9$5={class:"clearfix"},_hoisted_10$4={key:0,class:"row p-2"},_hoisted_11$4={class:"col"},_hoisted_12$3=["onClick","onUpdate:modelValue","id","data-id"],_hoisted_13$3=["for"],_hoisted_14$2={class:"col-auto"},_hoisted_15$2=["id","onUpdate:modelValue","onClick"],_hoisted_16$2={key:1,class:"list-unstyled clearfix",style:{"margin-left":"20px"}},_hoisted_17$2={class:"clearfix"},_hoisted_18$1={class:"row p-2"},_hoisted_19$1={class:"col"},_hoisted_20$1=["onClick","onUpdate:modelValue","id","data-id"],_hoisted_21$1=["for"],_hoisted_22$1={class:"col-auto"},_hoisted_23$1=["id","onUpdate:modelValue","onClick"],_hoisted_24$1={class:"row"},_hoisted_25$1={key:0,class:"alert alert-danger"},_hoisted_26$1={class:"form-group center-align"},_hoisted_27$1=["href"],_sfc_main$g={__name:"module-permission",props:["dataCmsModules","dataUserModules","dataControllerName","dataBackUrl","dataIsSuperAdmin"],setup(w){const e=w,o=getCurrentInstance(),r=ref(SafeJsonParse(e.dataUserModules,[])),i=ref(new Form({cmsModuleData:[],userId:0})),$=ref(!1),u=ref(!1),p=ref(""),n=computed(()=>{const N=r.value.cmsmodules||[],C=SafeJsonParse(e.dataCmsModules,[]),M=[],L=V=>{if(N.length>0){const E=N.find(b=>b.module_id.toString()===V.id.toString());return E===void 0?!1:E}return!1};if(C.length>0)for(let V=0;V<C.length;V++){const E=C[V],b=L(E);if(E.selected=!!b,E.readonly=b?b.readonly===1:!1,E.parent_id===0&&E.child&&E.child.length>0)for(let s=0;s<E.child.length;s++){const y=E.child[s],j=L(y);y.selected=!!j,y.readonly=j?j.readonly===1:!1}E.parent_id===0&&M.push(E)}return M}),v=computed(()=>adminConfig.admin_path(`${e.dataControllerName}/saveModulePermissions`)),S=N=>{SafeJsonParse(N,{});const C=M=>{const L=document.getElementById(`check_${M}`),V=document.getElementById(`check_readonly_${M}`);return L&&L.checked?{selected:!0,readonly:V?V.checked:!1}:{selected:!1,readonly:!1}};i.value.cmsModuleData.forEach(M=>{const L=C(M.id);L.selected&&(M.selected=!0,M.readonly=L.readonly),M.child&&M.child.length>0&&M.child.forEach(V=>{const E=C(V.id);E.selected&&(V.selected=!0,V.readonly=E.readonly)})})},a=N=>N.child&&N.child.length>0,g=N=>N.parent_id===0,h=(N,C,M=!1)=>{const L=C.target.checked;N.selected!==!0&&(N.selected=L)},k=(N,C,M=null)=>{let L=!N.selected;if(M!==null&&(L=M),N.child&&N.child.length>0&&N.child.forEach(V=>{V.selected=L,L||(V.readonly=!1)}),L!==!0&&(N.readonly=!1),C){const V=C.child.find(E=>E.selected===!0);(L||V)&&(C.selected=!0)}L===!1&&($.value=!1)},l=()=>{const N=$.value===!1;i.value.cmsModuleData.forEach(C=>{C.selected=N,k(C,void 0,N)})},f=()=>{(e.dataIsSuperAdmin.toString()==="1"||e.dataIsSuperAdmin.toString()==="true")&&(u.value=!0)},D=N=>{N.isSaved===!0?Toast.show(o,"Saved Successfully."):Toast.show(o,"There is some error.")},F=()=>{i.value.post(v.value,!1).then(N=>D(N)).catch(N=>D(N))};return onMounted(()=>{i.value.cmsModuleData=n.value,i.value.userId=r.value.id,f(),EventBus.on("on-paste",S)}),onBeforeUnmount(()=>{EventBus.off("on-paste",S)}),(N,C)=>(openBlock(),createElementBlock("div",null,[u.value?(openBlock(),createElementBlock("div",_hoisted_1$e,[createBaseVNode("strong",null,toDisplayString(r.value.name),1),C[2]||(C[2]=createTextVNode(" is admin or super admin. No need to provide module access. ",-1))])):createCommentVNode("",!0),u.value?(openBlock(),createElementBlock("div",_hoisted_2$b,[createBaseVNode("div",_hoisted_3$a,[createBaseVNode("a",{href:w.dataBackUrl,class:"btn btn-outline-primary"},"Okay :)",8,_hoisted_4$8)])])):createCommentVNode("",!0),u.value?createCommentVNode("",!0):(openBlock(),createElementBlock("form",{key:2,action:v.value,class:"form-horizontal",method:"post",role:"form",onSubmit:withModifiers(F,["prevent"])},[createBaseVNode("div",_hoisted_6$6,[createBaseVNode("h4",null,[createBaseVNode("label",null,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":C[0]||(C[0]=M=>$.value=M),type:"checkbox",onClick:C[1]||(C[1]=M=>l())},null,512),[[vModelCheckbox,$.value]]),C[3]||(C[3]=createTextVNode(" Select ",-1))]),C[4]||(C[4]=createTextVNode(" modules for ",-1)),createBaseVNode("span",_hoisted_7$5,toDisplayString(r.value.name)+" "+toDisplayString(r.value.last_name),1)])]),createBaseVNode("ul",_hoisted_8$5,[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.value.cmsModuleData,M=>(openBlock(),createElementBlock("li",_hoisted_9$5,[g(M)?(openBlock(),createElementBlock("div",_hoisted_10$4,[createBaseVNode("div",_hoisted_11$4,[withDirectives(createBaseVNode("input",{onClick:L=>k(M),class:"form-check-input",type:"checkbox","onUpdate:modelValue":L=>M.selected=L,id:"check_"+M.id,"data-id":M.id,"data-is-parent":"true"},null,8,_hoisted_12$3),[[vModelCheckbox,M.selected]]),createBaseVNode("label",{class:"form-check-label",for:"check_"+M.id},""+toDisplayString(M.name),9,_hoisted_13$3)]),createBaseVNode("div",_hoisted_14$2,[createBaseVNode("label",null,[withDirectives(createBaseVNode("input",{id:"check_readonly_"+M.id,"onUpdate:modelValue":L=>M.readonly=L,type:"checkbox",onClick:L=>h(M,L),"data-is-readonly-checkbox":"true"},null,8,_hoisted_15$2),[[vModelCheckbox,M.readonly]]),C[5]||(C[5]=createTextVNode(" Read Only",-1))])])])):createCommentVNode("",!0),a(M)?(openBlock(),createElementBlock("ul",_hoisted_16$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(M.child,L=>(openBlock(),createElementBlock("li",_hoisted_17$2,[createBaseVNode("div",_hoisted_18$1,[createBaseVNode("div",_hoisted_19$1,[withDirectives(createBaseVNode("input",{onClick:V=>k(L,M),class:"form-check-input",type:"checkbox","onUpdate:modelValue":V=>L.selected=V,id:"check_"+L.id,"data-id":L.id,"data-is-parent":"false"},null,8,_hoisted_20$1),[[vModelCheckbox,L.selected]]),createBaseVNode("label",{class:"form-check-label",for:"check_"+L.id,"data-is-readonly":"true"},""+toDisplayString(L.name),9,_hoisted_21$1)]),createBaseVNode("div",_hoisted_22$1,[createBaseVNode("label",null,[withDirectives(createBaseVNode("input",{id:"check_readonly_"+L.id,"onUpdate:modelValue":V=>L.readonly=V,type:"checkbox",onClick:V=>h(L,V,!0),"data-is-readonly-checkbox":"true"},null,8,_hoisted_23$1),[[vModelCheckbox,L.readonly]]),C[6]||(C[6]=createTextVNode(" Read Only",-1))])])])]))),256))])):createCommentVNode("",!0)]))),256))]),createBaseVNode("div",_hoisted_24$1,[p.value!==""?(openBlock(),createElementBlock("div",_hoisted_25$1,toDisplayString(p.value),1)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_26$1,[C[7]||(C[7]=createBaseVNode("input",{class:"btn btn-success btn-from-submit",name:"submit",type:"submit",value:"Save"},null,-1)),createBaseVNode("a",{href:w.dataBackUrl,class:"btn btn-outline-secondary"},"Back",8,_hoisted_27$1)])])],40,_hoisted_5$7))]))}},_hoisted_1$d={class:"row"},_hoisted_2$a={class:"col-auto"},_hoisted_3$9={key:0,class:"counters"},_hoisted_4$7={class:"col-auto"},_hoisted_5$6={key:0,class:"shadow-sm"},_hoisted_6$5={class:"pagination"},_hoisted_7$4=["href","innerHTML"],_hoisted_8$4={key:0,class:"col float-end"},_hoisted_9$4={class:"pull-right",style:{"margin-right":"16px"}},_sfc_main$f={__name:"pagination",props:["dataPaginator","dataFirstItem","dataLastItem","dataTotal","dataControllerName","dataNextLabel","dataPreviousLabel","dataShowDownload"],setup(w){const e=w,o=ref(parseInt(e.dataTotal)),r=ref(parseInt(e.dataLastItem)),i=ref(e.dataControllerName),$=ref(SafeJsonParse(e.dataPaginator,{})),u={"pagination.next":e.dataNextLabel,"pagination.previous":e.dataPreviousLabel},p=ref(e.dataShowDownload==="true"||e.dataShowDownload==="1"),n=computed(()=>$.value.links||[]),v=computed(()=>n.value.length>3),S=()=>{o.value-=1,r.value-=1},a=l=>l.url==null?"javascript:void(0)":l.url,g=l=>u[l]||l,h=l=>l.url==null?"page-item disabled":l.active===!0?"page-item active":"page-item",k=()=>{let l=window.location.search.substring(1);l.match(/page=\d+/gi)!=null&&(l=l.replace(/page=\d+/,"")),l!==""&&(l=l.indexOf("&")===0?l:`&${l}`,document.querySelectorAll(".pagination a").forEach(F=>{let N=F.href;N=`${N}${l}`,N=N.replace(/&$/,"").replace(/&&/,"&"),F.href=N}))};return onMounted(()=>{k(),EventBus.on("pagination-on-delete",S)}),onBeforeUnmount(()=>{EventBus.off("pagination-on-delete",S)}),(l,f)=>(openBlock(),createElementBlock("div",_hoisted_1$d,[createBaseVNode("div",_hoisted_2$a,[o.value>0?(openBlock(),createElementBlock("span",_hoisted_3$9,toDisplayString(w.dataFirstItem)+" - "+toDisplayString(r.value)+" of "+toDisplayString(o.value),1)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_4$7,[v.value?(openBlock(),createElementBlock("nav",_hoisted_5$6,[createBaseVNode("ul",_hoisted_6$5,[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.value,D=>(openBlock(),createElementBlock("li",{class:normalizeClass(h(D))},[createBaseVNode("a",{class:"page-link",href:a(D),innerHTML:g(D.label)},null,8,_hoisted_7$4)],2))),256))])])):createCommentVNode("",!0)]),o.value>0&&p.value?(openBlock(),createElementBlock("div",_hoisted_8$4,[createBaseVNode("span",_hoisted_9$4,[createVNode(_sfc_main$u,{"data-controller-name":i.value},null,8,["data-controller-name"])])])):createCommentVNode("",!0)]))}},_hoisted_1$c=["name","id","multiple"],_hoisted_2$9=["value"],_hoisted_3$8={class:"fa fa-refresh fa-spin","aria-hidden":"true"},_sfc_main$e={__name:"platform-button",props:["dataName","dataId","dataPlatforms","dataSelected","dataMultiple","dataSiteId","dataFetchOnInit"],setup(w){const e=w,o=()=>typeof e.dataMultiple>"u"||e.dataMultiple!=="true"?typeof e.dataSelected>"u"?1:parseInt(e.dataSelected):SafeJsonParse(e.dataSelected,[1]),r=ref(SafeJsonParse(e.dataPlatforms,[])),i=ref(typeof e.dataName>"u"?"platform_id":e.dataName),$=ref(typeof e.dataId>"u"?"platform_id":e.dataId),u=ref(typeof e.dataSiteId>"u"?1:parseInt(e.dataSiteId)),p=ref(typeof e.dataFetchOnInit>"u"||e.dataFetchOnInit==="false"?!1:e.dataFetchOnInit),n=ref(!1),v=ref(o()),S=(h=null)=>{if(h===null||h==="")return r.value=[],!1;n.value=!0;const k=adminConfig.admin_path(`ajax/getInfo/site/${h}`);axios$1.get(k).then(l=>{r.value=l.data.results.platform}).catch(l=>{console.error(l.response?.data||l.message)}).finally(()=>{n.value=!1})},a=()=>{EventBus.emit("platform_changed",v.value)},g=()=>{S(u.value)};return onMounted(()=>{p.value!==!1&&g(),EventBus.on("site_changed",S)}),onBeforeUnmount(()=>{EventBus.off("site_changed",S)}),(h,k)=>(openBlock(),createElementBlock("div",null,[withDirectives(createBaseVNode("select",{name:i.value,id:$.value,onChange:a,"onUpdate:modelValue":k[0]||(k[0]=l=>v.value=l),multiple:w.dataMultiple=="true"},[k[1]||(k[1]=createBaseVNode("option",{value:""},"Select Platform",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,l=>(openBlock(),createElementBlock("option",{value:l.id},toDisplayString(l.name),9,_hoisted_2$9))),256))],40,_hoisted_1$c),[[vModelSelect,v.value]]),withDirectives(createBaseVNode("i",_hoisted_3$8,null,512),[[vShow,n.value]])]))}},_hoisted_1$b=["name","id"],_hoisted_2$8=["value"],_sfc_main$d={__name:"site-button",props:["dataName","dataId","dataSites","dataSelected"],setup(w){const e=w,o=ref(SafeJsonParse(e.dataSites,[])),r=ref(typeof e.dataSelected>"u"?1:parseInt(e.dataSelected)),i=ref(typeof e.dataName>"u"?"site_id":e.dataName),$=ref(typeof e.dataId>"u"?"site_id":e.dataId),u=()=>{EventBus.emit("site_changed",r.value)};return(p,n)=>(openBlock(),createElementBlock("div",null,[withDirectives(createBaseVNode("select",{name:i.value,id:$.value,onChange:u,"onUpdate:modelValue":n[0]||(n[0]=v=>r.value=v)},[n[1]||(n[1]=createBaseVNode("option",{value:""},"Select Site",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.value,v=>(openBlock(),createElementBlock("option",{value:v.id},toDisplayString(v.name),9,_hoisted_2$8))),256))],40,_hoisted_1$b),[[vModelSelect,r.value]])]))}},_hoisted_1$a={class:"row"},_hoisted_2$7={class:"form-group"},_hoisted_3$7={class:"col-sm-4"},_hoisted_4$6=["value"],_hoisted_5$5={class:"row margin-top-20"},_hoisted_6$4={class:"form-group"},_hoisted_7$3={class:"col-sm-4"},_hoisted_8$3=["value"],_hoisted_9$3={class:"row margin-top-20"},_hoisted_10$3={class:"form-group"},_hoisted_11$3={class:"col-sm-4"},_hoisted_12$2={class:"alert alert-info text-center"},_hoisted_13$2={class:"alert alert-info"},_sfc_main$c={__name:"site-cloner",props:["dataAllSites"],setup(w){const o=ref(SafeJsonParse(w.dataAllSites,[])),r=ref(""),i=ref(""),$=ref(!1),u=ref(""),p=ref([]),n=computed(()=>u.value===""?"It's undoable. Please be careful.":u.value),v=h=>{let k="";return h.name||h.alias?k=h.name||h.alias:h.lang&&(k=typeof h.lang.name>"u"?"":h.lang.name),k},S=h=>{$.value=h},a=()=>{console.log("copying now..."),S(1);const h={sourceSiteId:r.value,tagetSiteId:i.value},k=adminConfig.admin_path("site/cloneSite");axios.post(k,h).then(l=>{console.log(l),p.value=l.data,S(2)}).catch(l=>{console.log("Error: ",l.response),u.value=l.response?l.response.data.message:l.message,S(0)})},g=()=>{a()};return(h,k)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$a,[createBaseVNode("div",_hoisted_2$7,[k[4]||(k[4]=createBaseVNode("div",{class:"col-sm-2"},"Copy From:",-1)),createBaseVNode("div",_hoisted_3$7,[withDirectives(createBaseVNode("select",{class:"form-select","onUpdate:modelValue":k[0]||(k[0]=l=>r.value=l)},[k[3]||(k[3]=createBaseVNode("option",{value:""},"Select Site",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.value,l=>(openBlock(),createElementBlock("option",{value:l.id},toDisplayString(v(l)),9,_hoisted_4$6))),256))],512),[[vModelSelect,r.value]])])])]),createBaseVNode("div",_hoisted_5$5,[createBaseVNode("div",_hoisted_6$4,[k[6]||(k[6]=createBaseVNode("div",{class:"col-sm-2"},"Copy To:",-1)),createBaseVNode("div",_hoisted_7$3,[withDirectives(createBaseVNode("select",{class:"form-select","onUpdate:modelValue":k[1]||(k[1]=l=>i.value=l)},[k[5]||(k[5]=createBaseVNode("option",{value:""},"Select Site",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.value,l=>(openBlock(),createElementBlock("option",{value:l.id},toDisplayString(v(l)),9,_hoisted_8$3))),256))],512),[[vModelSelect,i.value]])])])]),createBaseVNode("div",_hoisted_9$3,[createBaseVNode("div",_hoisted_10$3,[k[8]||(k[8]=createBaseVNode("div",{class:"col-sm-2"},"",-1)),createBaseVNode("div",_hoisted_11$3,[withDirectives(createBaseVNode("div",{class:"alert alert-danger text-center"},toDisplayString(n.value),513),[[vShow,u.value!=""&&!$.value]]),withDirectives(createBaseVNode("div",_hoisted_12$2,[...k[7]||(k[7]=[createBaseVNode("span",{class:"fa fa-spinner fa-pulse fa-fw"},"",-1),createTextVNode("Please wait and don't close this window. It's not running in thread :) ",-1)])],512),[[vShow,$.value==1]]),withDirectives(createBaseVNode("div",_hoisted_13$2,[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(p.value,l=>(openBlock(),createElementBlock("li",null,[createBaseVNode("span",{class:normalizeClass(l.success===!1?"text-danger":"")},toDisplayString(l.message),3)]))),256))])],512),[[vShow,$.value>1]]),createBaseVNode("input",{onClick:k[2]||(k[2]=l=>g()),type:"button",name:"submit",value:"Copy Now!",class:"btn btn-block btn-success"})])])])]))}},_hoisted_1$9={class:"col col-4"},_hoisted_2$6={class:"card border-0"},_hoisted_3$6={class:"card-header"},_hoisted_4$5={class:"card-title m-0",style:{"line-height":"inherit"}},_hoisted_5$4={class:"badge text-bg-secondary"},_hoisted_6$3={class:"card-body p-2"},_hoisted_7$2={key:0,class:"card-subtitle mb-2 text-muted"},_hoisted_8$2={class:"inline"},_hoisted_9$2={key:1,class:"panel-sub-heading",style:{padding:"4px"}},_hoisted_10$2={class:"input-group"},_hoisted_11$2={class:"list-group"},_hoisted_12$1={class:"list-group-item"},_hoisted_13$1={class:"normal"},_hoisted_14$1=["onUpdate:modelValue"],_hoisted_15$1={class:"col col-4"},_hoisted_16$1={class:"card border-0"},_hoisted_17$1={key:0,class:"card-body p-0"},_hoisted_18=["innerHTML"],_hoisted_19={class:"card-header"},_hoisted_20={class:"card-title text-success m-0",style:{"line-height":"inherit"}},_hoisted_21={class:"badge text-bg-secondary"},_hoisted_22={class:"card-body"},_hoisted_23={key:0,class:"card-subtitle mb-2 text-muted"},_hoisted_24={class:"inline"},_hoisted_25={class:"list-group"},_hoisted_26={class:"list-group-item"},_hoisted_27={class:"normal"},_hoisted_28=["onUpdate:modelValue"],_sfc_main$b={__name:"sitewise-data",props:["dataMessage","dataAllData","dataSiteData","dataCurrentKey","dataSiteId","dataDefaultActionForSave","dataAlertCss","dataControllerName"],setup(w,{expose:e}){const o=w,r=getCurrentInstance(),i=ref(SafeJsonParse(o.dataSiteData,[])),$=ref(SafeJsonParse(o.dataAllData,[])),u=ref(o.dataCurrentKey),p=ref(""),n=ref(parseInt(o.dataSiteId)),v=ref(typeof o.dataMessage>"u"?"":o.dataMessage),S=ref(typeof o.dataDefaultActionForSave>"u"?"saveSettings":o.dataDefaultActionForSave),a=ref(typeof o.dataAlertCss>"u"||o.dataAlertCss===""?"alert alert-info":o.dataAlertCss),g=ref(typeof o.dataControllerName>"u"?"site":o.dataControllerName),h=computed(()=>$.value.label),k=computed(()=>$.value.data?$.value.data.length:0),l=computed(()=>i.value==null?0:i.value.length),f=computed(()=>$.value.data&&$.value.data.length>10),D=(b,s)=>(Loader.show(r,"Please wait. Making Changes..."),new Promise((y,j)=>{axios.post(b,s).then(O=>y(O)).catch(O=>j(SafeErrorData(O))).finally(()=>Loader.hide(r))})),F=(b="add")=>{const s=b==="add"?$.value.data:i.value,y=[],j=[];if(s&&s.length>0){if(s.forEach(O=>{O.selected===!0&&(y.push(O.id),j.push(O))}),typeof S.value=="function")return S.value(b,s,j,y),!1;if(y.length>0){const O={key:u.value,ids:y,site_id:n.value,action:b};D(adminConfig.admin_path(`${g.value}/${S.value}`),O).then(G=>{b==="add"?j.forEach(R=>{const K=R.id;i.value.findIndex(Q=>Q.id===K)===-1&&i.value.push(R)}):j.forEach(R=>{const K=R.id,X=i.value.findIndex(Q=>Q.id===K);X!==-1&&i.value.splice(X,1)})}).catch(G=>{console.error("error: ",G),Toast.show(r,G?.data?.message||"I don't know what went wrong.",5e3)})}}},N=(b,s)=>{const y=b==="table"?$.value.data:i.value,j=s.checked;y&&y.length>0&&y.forEach(O=>{O.selected=j})},C=b=>b.lang?typeof b.lang.name>"u"?"":b.lang.name:b.name||b.alias||"",M=b=>{if(typeof b.name<"u"||typeof b.alias<"u")return b.name||b.alias;if(b.lang)return typeof b.lang.name>"u"?"":b.lang.name;if($.value.data&&$.value.data.length>0){const s=$.value.data.findIndex(y=>y.id===b.id||typeof b.link_rewrite<"u"&&b.link_rewrite===y.link_rewrite);return s===-1?"":C($.value.data[s])}return""},L=()=>{let b=p.value;return b!==""&&b!=null?(b=b.toLowerCase(),$.value.data.filter(s=>C(s).toLowerCase().includes(b)||s.id.toString()===b)):$.value.data};return e({setData:(b,s)=>{$.value[b]=s},setSiteData:b=>{i.value=b}}),(b,s)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$9,[createBaseVNode("div",_hoisted_2$6,[createBaseVNode("div",_hoisted_3$6,[createBaseVNode("h5",_hoisted_4$5,[createTextVNode(" Available "+toDisplayString(h.value)+" ",1),createBaseVNode("span",_hoisted_5$4,toDisplayString(k.value),1),createBaseVNode("button",{type:"button",title:"Add Selected",onClick:s[0]||(s[0]=y=>F("add")),class:"hand pull-right btn btn-sm btn-primary"}," Add Selected ")])]),createBaseVNode("div",_hoisted_6$3,[k.value>0?(openBlock(),createElementBlock("div",_hoisted_7$2,[createBaseVNode("label",_hoisted_8$2,[createBaseVNode("input",{type:"checkbox",onClick:s[1]||(s[1]=y=>N("table",y.target))}),s[5]||(s[5]=createTextVNode(" Select All",-1))])])):createCommentVNode("",!0),f.value?(openBlock(),createElementBlock("div",_hoisted_9$2,[createBaseVNode("div",_hoisted_10$2,[withDirectives(createBaseVNode("input",{type:"text",placeholder:"Search",class:"form-control","aria-describedby":"basic-addon3","onUpdate:modelValue":s[2]||(s[2]=y=>p.value=y)},null,512),[[vModelText,p.value]])])])):createCommentVNode("",!0),createBaseVNode("ul",_hoisted_11$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(L(),(y,j)=>(openBlock(),createElementBlock("li",_hoisted_12$1,[createBaseVNode("label",_hoisted_13$1,[withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":O=>y.selected=O},null,8,_hoisted_14$1),[[vModelCheckbox,y.selected]]),createTextVNode(" "+toDisplayString(C(y)),1)])]))),256))])])])]),createBaseVNode("div",_hoisted_15$1,[createBaseVNode("div",_hoisted_16$1,[v.value.length>0?(openBlock(),createElementBlock("div",_hoisted_17$1,[createBaseVNode("small",{class:normalizeClass(a.value),innerHTML:v.value,style:{display:"block"}},null,10,_hoisted_18)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_19,[createBaseVNode("h5",_hoisted_20,[createTextVNode(" Added "+toDisplayString(h.value)+" ",1),createBaseVNode("span",_hoisted_21,toDisplayString(l.value),1),createBaseVNode("button",{title:"Remove Selected",onClick:s[3]||(s[3]=y=>F("remove")),class:"btn btn-sm btn-danger pull-right"}," Remove Selected ")])]),createBaseVNode("div",_hoisted_22,[l.value>0?(openBlock(),createElementBlock("div",_hoisted_23,[createBaseVNode("label",_hoisted_24,[createBaseVNode("input",{type:"checkbox",onClick:s[4]||(s[4]=y=>N("sitewise",y.target))}),s[6]||(s[6]=createTextVNode(" Select All",-1))])])):createCommentVNode("",!0),createBaseVNode("ul",_hoisted_25,[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.value,(y,j)=>(openBlock(),createElementBlock("li",_hoisted_26,[createBaseVNode("label",_hoisted_27,[withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":O=>y.selected=O},null,8,_hoisted_28),[[vModelCheckbox,y.selected]]),createTextVNode(" "+toDisplayString(M(y)),1)])]))),256))])])])])],64))}},_hoisted_1$8={class:"col mt-2"},_hoisted_2$5={class:"mb-2"},_hoisted_3$5=["value"],_hoisted_4$4={class:"row"},_sfc_main$a={__name:"sitewise-copier",props:["dataAllSites","dataMessage","dataAllData","dataSiteData","dataCurrentKey","dataSiteId","dataAlertCss","dataControllerName"],setup(w){const e=w,o=getCurrentInstance(),r=ref(null),i=ref(SafeJsonParse(e.dataAllSites,[])),$=ref(SafeJsonParse(e.dataSiteData,[])),u=ref(SafeJsonParse(e.dataAllData,[])),p=ref(e.dataCurrentKey),n=ref(parseInt(e.dataSiteId)),v=ref(""),S=ref(typeof e.dataControllerName>"u"?"site":e.dataControllerName),a=F=>{F?Loader.show(o,"Please wait..."):Loader.hide(o)},g=F=>{let N="";return F.name||F.alias?N=F.name||F.alias:F.lang&&(N=typeof F.lang.name>"u"?"":F.lang.name),N},h=F=>{u.value=F,r.value&&r.value.setData("data",F)},k=()=>{if(v.value!==""){const F=p.value,N=adminConfig.admin_path(`${S.value}/getBySite/${v.value}/${F}`);a(!0),axios.get(N).then(C=>{h(C.data)}).catch(C=>{console.error("getBySite error:",SafeErrorData(C))}).finally(()=>{a(!1)})}else h([])},l=(F,N,C)=>{console.log("copying now...");const M={fromSite:{site_id:v.value,data:N},toSite:{site_id:n.value},type:p.value};a(!0);const L=adminConfig.admin_path(`${S.value}/copySettings`);axios.post(L,M).then(V=>{const E=V.data;if(E.inserted===!1)Toast.show(o,E.message||"Nothing happened.",5e3);else{const b=E.ignored,s=E.copied;r.value&&r.value.setSiteData(E.siteData);const y=`${s.length} Copied and ${b.length} ignored. Open console for details`;Toast.show(o,y,7e3),console.info("Copied: ",s),console.info("Ignored: ",b)}}).catch(V=>{console.error("actionAdd error:",SafeErrorData(V))}).finally(()=>{a(!1)})},f=(F,N,C)=>{const M=N.length>0?N[0].site_id:null;if(M===null)return!1;const L={site_id:M,ids:C,type:p.value},V=adminConfig.admin_path(`${S.value}/removeSettings`);a(!0),axios.post(V,L).then(E=>{const b=E.data;b.deleted===0&&Toast.show(o,"Sorry!, Somehow it's not deleted.",5e3),r.value&&r.value.setSiteData(b.siteData)}).catch(E=>{console.error("actionRemove error:",SafeErrorData(E))}).finally(()=>{a(!1)})},D=(F,N,C,M)=>{F==="add"?l(N,C):f(N,C,M)};return(F,N)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$8,[createBaseVNode("div",_hoisted_2$5,[N[3]||(N[3]=createTextVNode(" Copy From: ",-1)),withDirectives(createBaseVNode("select",{class:"form-select inline width-auto",onChange:N[0]||(N[0]=C=>k()),"onUpdate:modelValue":N[1]||(N[1]=C=>v.value=C)},[N[2]||(N[2]=createBaseVNode("option",{value:""},"Select Site",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(i.value,C=>(openBlock(),createElementBlock("option",{value:C.id},toDisplayString(g(C)),9,_hoisted_3$5))),256))],544),[[vModelSelect,v.value]])])]),createBaseVNode("div",_hoisted_4$4,[createVNode(_sfc_main$b,{ref_key:"siteWiseComponent",ref:r,"data-message":w.dataMessage,"data-site-data":JSON.stringify($.value),"data-all-data":JSON.stringify(u.value),"data-current-key":p.value,"data-site-id":n.value,"data-default-action-for-save":D,"data-alert-css":w.dataAlertCss},null,8,["data-message","data-site-data","data-all-data","data-current-key","data-site-id","data-alert-css"])])],64))}},_hoisted_1$7={id:"sortableField"},_hoisted_2$4={class:"parent"},_hoisted_3$4={key:0,class:"js_more fa fa-ellipsis-v pull-right adjustMore"},_hoisted_4$3={class:"text"},_hoisted_5$3={key:0},_hoisted_6$2={class:"text"},_sfc_main$9={__name:"sorter",props:["dataAllModules","dataControllerName"],setup(w){const e=w,o=getCurrentInstance(),r=ref(SafeJsonParse(e.dataAllModules,[])),i=ref(null),$=ref(-1),u=ref(""),p=computed(()=>(typeof e.dataControllerName>"u"?"":e.dataControllerName.toLocaleLowerCase()).replace(/\s/g,"")),n=computed(()=>adminConfig.admin_path(`${p.value}/updateIndex`)),v=N=>N.child&&N.child.length>0,S=()=>{document.querySelectorAll(".sortElem .parent").forEach(N=>{N.classList.remove("active")})},a=N=>{const C=N.target,M=C.parentElement?.parentElement?.parentElement;M!==u.value?(S(),C.classList.contains("js_more")&&(N.preventDefault(),M&&M.classList.add("active","animated","fadeIn")),u.value=M):M&&(M.classList.contains("active")?M.classList.remove("active"):M.classList.add("active"))},g=()=>{$.value!==-1&&clearInterval($.value)},h=N=>{Toast.show(o,"Modules Sorted.")},k=N=>{console.log(N)},l=(N,C,M)=>new Promise((L,V)=>{axios[N](C,M).then(E=>{h(),L(E)}).catch(E=>{k(SafeErrorData(E)),V(E)})}),f=N=>{l("post",n.value,N)},D=N=>{const C=[];document.querySelectorAll(".sortElem .parent").forEach((M,L)=>{const V=M.children[0].children[0].innerText;for(let E=0;E<r.value.length;E++)r.value[E].module_pid===0&&r.value[E].name===V&&(C[E]={id:r.value[E].id,position:L,name:r.value[E].name})}),f(C),g()},F=()=>{nextTick(()=>{i.value!=null&&i.value.destroy();const N=document.getElementById("sortableField");N&&(i.value=Sortable.create(N,{onEnd:D,onStart:g}))})};return onMounted(()=>{F()}),(N,C)=>(openBlock(),createElementBlock("div",{class:"sortElem",onClick:C[0]||(C[0]=M=>a(M))},[createBaseVNode("ul",_hoisted_1$7,[N.current.module_pid==0?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(r.value,M=>(openBlock(),createElementBlock("li",_hoisted_2$4,[createBaseVNode("h3",null,[createBaseVNode("a",null,[v(M)?(openBlock(),createElementBlock("i",_hoisted_3$4)):createCommentVNode("",!0),createBaseVNode("span",_hoisted_4$3,toDisplayString(M.name),1)])]),v(M)?(openBlock(),createElementBlock("ul",_hoisted_5$3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(M.child,L=>(openBlock(),createElementBlock("li",null,[createBaseVNode("a",null,[createBaseVNode("span",_hoisted_6$2,toDisplayString(L.name),1)])]))),256))])):createCommentVNode("",!0)]))),256)):createCommentVNode("",!0)])]))}},_hoisted_1$6={key:0,class:"row"},_hoisted_2$3=["id"],_hoisted_3$3={class:"table border shadow-sm mt-2 table-grid"},_hoisted_4$2=["innerHTML"],_hoisted_5$2=["innerHTML"],_hoisted_6$1={key:1,class:"table border shadow-sm mt-2 table-grid"},_hoisted_7$1=["id"],_hoisted_8$1=["innerHTML"],_hoisted_9$1=["innerHTML"],_hoisted_10$1={class:"text-danger"},_hoisted_11$1={class:"row"},_hoisted_12={class:"col-auto"},_hoisted_13={class:"form-check pt-2"},_hoisted_14={class:"col-auto"},_hoisted_15={key:1,class:"row"},_hoisted_16={class:"col"},_hoisted_17=["innerHTML"],_sfc_main$8={__name:"tabular-view",props:["dataHeaders","dataList","dataActionFields","dataMoreActionFields","dataControllerName","dataActionAsAjax","dataActionCss","dataUserRights","dataMakeFieldAsLink","dataShowDeletePopup","dataEditHandledByOtherComponent","dataMinResultsNeeded","dataLayoutType","dataNoResultsFoundText"],setup(w){const e=w,o=getCurrentInstance(),r=ref(null),i=ref(null),$=ref(null),u=(T,d)=>window.Laravel?.htcmsAdminConfig(T)||d,p=ref(SafeJsonParse(e.dataActionFields,[])),n=ref(SafeJsonParse(e.dataUserRights,[])),v=ref(SafeJsonParse(e.dataMoreActionFields,[])),S=ref(SafeJsonParse(e.dataActionAsAjax,u("action_as_ajax",[])));ref(SafeJsonParse(e.dataActionCss,u("action_icon_css",{})));const a=reactive({current:"Are you sure to delete this?",delete:"Are you sure to delete this?",permission:"Sorry! You don't have permission to delete this."}),g=ref(!0),h=ref(null),k=ref(!1),l=ref(SafeJsonParse(e.dataMakeFieldAsLink,[])),f=reactive({}),D=ref(e.dataShowDeletePopup?e.dataShowDeletePopup.toString().toUpperCase():"FALSE"),F=ref(e.dataEditHandledByOtherComponent===!0||e.dataEditHandledByOtherComponent?.toString()==="true"),N=ref(e.dataMinResultsNeeded===""||e.dataMinResultsNeeded===void 0?-1:parseInt(e.dataMinResultsNeeded)),C=ref(e.dataLayoutType||"table"),M=ref(e.dataNoResultsFoundText),L=["fa-spinner","fa-pulse","fa-fw"],V=computed(()=>{const T=SafeJsonParse(e.dataHeaders,[]),d=[];return T.length>0&&T.forEach(t=>{const m=t.label||t,P=t.key||t,A=!!(t.isImage&&t.isImage.toString()==="true"),H=!!(t.showAllScopes&&t.showAllScopes.toString()==="true");d.push({label:m,key:P,isImage:A,showAllScopes:H})}),d}),E=ref(SafeJsonParse(e.dataList,[]));watch(()=>e.dataList,T=>{E.value=SafeJsonParse(T,[])});const b=T=>{if(!T||typeof T!="string")return T;try{const t=new DOMParser().parseFromString(T,"text/html");return["script","iframe","object","embed","base"].forEach(A=>{t.querySelectorAll(A).forEach(H=>H.remove())}),t.querySelectorAll("*").forEach(A=>{for(let H=A.attributes.length-1;H>=0;H--){const q=A.attributes[H].name.toLowerCase();(q.startsWith("on")||q==="javascript:")&&A.removeAttribute(q)}}),t.body.innerHTML}catch(d){return console.error("Sanitization failed",d),T}},s=T=>{const d=(T===void 0?"":T).toLowerCase();return d==="action"||d==="moreactions"},y=T=>{if(f[T]!==void 0)return f[T];const d=l.value.find(t=>t.key===T||t.action===T);return f[T]=d===void 0?-1:d,f[T]},j=(T,d="label")=>typeof T=="string"||T[d]===void 0?T:T[d],O=T=>n.value.indexOf(T)>=0,G=T=>S.value.indexOf(T)>=0,R=T=>{let d="";const t=Object.prototype.toString.call(T)==="[object Object]"?T.action:T;return G(T)?d="js_action js_ajax js_"+t:d="js_action js_"+t,d},K=T=>u("action_icon_css",{})[T]||"",X=()=>{const T=L,d=document.querySelectorAll(".fa-spinner");d.length>0&&d.forEach(t=>{t.classList.remove(...T)})},Q=(T,d=!0)=>{if(T){let t=T instanceof HTMLAnchorElement?T:T.currentTarget;X(),d===!0&&t&&t.firstElementChild&&t.firstElementChild.classList.add(...L)}else X()},re=(T,d,t)=>{if(d.includes(".")){const A=d.split(".");let H=A[0];const q=A[1];let z=T[H];switch(Object.prototype.toString.call(z)){case"[object Undefined]":z="";break;case"[object Array]":z.length>0?t.showAllScopes?z=z.map(ae=>ae[q]).join(","):z=z[0][q]:z="";break;case"[object Object]":z=z[q]||"";break}return z}let m="";const P=y(d);if(P!==void 0&&P!==-1){const A=P.action||d,H=A.charAt(0).toUpperCase()+A.slice(1),q=adminConfig.admin_path(`${e.dataControllerName}/${A}/${T.id}`);let z=T[d],ee="",ae="";G(d)&&(ee=R(d),ee+=` ${d}_${T[d]}`,z=`<i class="js_icon ${P[`css_${T[d]}`]||""}"></i>`,O(A)||(ee+=" disabled"),ae=T[d]),m=`<a class="${ee}" data-value="${ae}" data-rowid="${T.id}" data-action="${A}" title="${H}" href="${q}">${z}</a>`,d==="id"&&p.value.indexOf("edit")===-1&&(m=z)}else{m=T[d];const A=adminConfig.get("media_path");if(t.isImage&&m!==""&&m!=null){const H=["apng","avif","gif","jpg","jpeg","jfif","pjpeg","pjp","png","svg","webp","bmp","ico","cur","tif","tiff"],q=["mp4","mov","ogg"],z=m.substring(m.lastIndexOf(".")+1).toLowerCase();q.indexOf(z)>=0?m=`<a class="table-links" href="${A}/${m}" target="_blank"><video height="30"><source src="${A}/${m}"></video></a>`:H.indexOf(z)>=0?m=`<a class="table-links" href="${A}/${m}" target="_blank"><img height="30" src='${A}/${m}' /></a>`:m=`<a class="table-links" href="${A}/${m}" target="_blank">${m}</a>`}}return m},le=T=>{const d=[];return p.value.length>0&&p.value.forEach(t=>{let m="";if(t==="edit"?m=adminConfig.admin_path(`${e.dataControllerName}/${t}/${T.id}`):t==="delete"?N.value!==-1&&N.value>=E.value.length?console.info(`Hiding delete button, because ${N.value} record(s) needed.`):m=adminConfig.admin_path(`${e.dataControllerName}/destroy/${T.id}`):m=adminConfig.admin_path(`${e.dataControllerName}/${t}/${T.id}`),m!==""){const P=R(t),A=t.charAt(0).toUpperCase()+t.slice(1),H=`<i class="js_icon ${K(t)}"></i>`;d.push(`<a class="${P}" data-rowid="${T.id}" data-action="${t}" title="${A}" href="${m}">${H}</a>`)}}),v.value.length>0&&v.value.forEach(t=>{const m=R(t),P=t.css||"";let A="";if(t.hrefAttributes)for(const ie in t.hrefAttributes)Object.prototype.hasOwnProperty.call(t.hrefAttributes,ie)&&(A+=`${ie}='${t.hrefAttributes[ie]}' `);const H=t.action,q=T[t.action_append_field]||"",z=t.label.charAt(0).toUpperCase()+t.label.slice(1),ee=adminConfig.admin_path(`${e.dataControllerName}/${H}/${q}`),ae=`<i class="js_icon ${t.icon_css}"></i>`;d.push(`<a class="${m} ${P}" data-rowid="${T.id}" title="${z}" href="${ee}" data-action="${H}" ${A}>${ae}</a>`)}),d.join("&nbsp;")},oe=(T="get",d,t,m)=>axios$1[T](d).then(P=>{t&&t(P)}).catch(P=>{m?m(P):Toast.show(o,P.message,5e3),Q(h.value,!1)}),U=()=>{r.value&&r.value.close()},B=T=>{r.value&&r.value.open(T)},x=(T=1)=>{let d=-1;try{if(T===1){const t=h.value;if(O("delete")){d="row_"+t.getAttribute("data-rowid");const m=t.getAttribute("href");oe("delete",m,P=>{if(P.status===200){const A=E.value.findIndex(H=>H.id.toString()===P.data.id.toString());A>=0&&(Toast.show(o,"Record has been deleted",2e3),E.value.splice(A,1),EventBus.emit("pagination-on-delete"),nextTick(()=>se()))}else Q(h.value,!1),Toast.show(o,"Ooops! Got some error!")})}else Toast.show(o,"Sorry! You don't have permission to delete."),setTimeout(()=>Q(h.value,!1),1e3)}else Q(h.value,!1)}catch{Q(h.value,!1),Toast.show(o,"I don't understand what you are trying to do.",5e3)}U()},W=(T,d,t,m)=>{i.value&&i.value.showInfo(T,d,t,m)},Y=T=>{T.preventDefault(),T.stopPropagation();const d=T.currentTarget,t=d.dataset,m=t.action,P=t.value;let A=d.getAttribute("href");switch(P&&(A=`${A}/${P}`),h.value=d,m){case"delete":a.current=a.delete,g.value=!0,k.value===!1?B(d):x(1);break;case"showinfo":W(t.info,t.rowid,t.excludefields||[],t.editable);break;default:oe("get",A,H=>{Q(d,!1);const q=y(m),z=d.querySelector(".js_icon");if(z){const ee=q[`css_${P}`];ee&&z.classList.remove(...ee.split(" "));const ae=H.data.status;d.setAttribute("data-value",ae);const ie=q[`css_${ae}`];ie&&z.classList.add(...ie.split(" "))}},H=>{Q(d,!1),Toast.show(o,H?.response?.data?.message||"Unknown Error!",3e3)});break}},se=()=>{if(!$.value)return;const T=$.value.getElementsByClassName("js_action");for(let d=0;d<T.length;d++){const t=T[d];t.classList.contains("js_ajax")&&t.addEventListener("click",Y,!1),t.classList.contains("js_action")&&t.addEventListener("click",Q,!1)}F.value===!0&&$.value.querySelectorAll("a[data-action='edit']").forEach(t=>{t.addEventListener("click",m=>{m.preventDefault(),EventBus.emit("list-view-pre-edit",t)})})},ue=()=>{const T=QueryBuilder.get("id");if(T!==""){const d=`row_${T}`;Fx.scrollWinTo(`#${d}`,()=>{Fx.highlight(d)})}},_e=()=>E.value.length===0,de=T=>{const d=T.replace(/\.|_/g," ");return d.charAt(0).toUpperCase()+d.slice(1)},me=T=>T.replace(/\s|\./g,"_").toLowerCase(),pe=(T,d)=>V.value.length-1===d?"active":"",fe=()=>{ue(),se(),D.value==="FALSE"&&(k.value=!0)};return onMounted(()=>{fe(),EventBus.on("list-view-hide-spinner",()=>Q(void 0,!1)),EventBus.on("info-popup-open",()=>X())}),onBeforeUnmount(()=>{EventBus.off("list-view-hide-spinner"),EventBus.off("info-popup-open")}),(T,d)=>(openBlock(),createElementBlock("div",{class:"clearfix",ref_key:"root",ref:$},[_e()?createCommentVNode("",!0):(openBlock(),createElementBlock(Fragment,{key:0},[C.value==="grid"?(openBlock(),createElementBlock("div",_hoisted_1$6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(E.value,t=>(openBlock(),createElementBlock("div",{id:"row_"+t.id,key:t.key,class:"col"},[createBaseVNode("table",_hoisted_3$3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(V.value,(m,P)=>(openBlock(),createElementBlock("tr",{class:normalizeClass(pe(m,P))},[createBaseVNode("td",{class:normalizeClass("header head_"+j(m))},toDisplayString(de(j(m))),3),createBaseVNode("td",null,[s(j(m,"key"))?createCommentVNode("",!0):(openBlock(),createElementBlock("span",{key:0,innerHTML:b(re(t,j(m,"key"),m))},null,8,_hoisted_4$2)),s(j(m,"key"))?(openBlock(),createElementBlock("div",{key:1,class:"actions",innerHTML:b(le(t))},null,8,_hoisted_5$2)):createCommentVNode("",!0)])],2))),256))])],8,_hoisted_2$3))),128))])):createCommentVNode("",!0),C.value==="table"?(openBlock(),createElementBlock("table",_hoisted_6$1,[createBaseVNode("thead",null,[createBaseVNode("tr",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(V.value,t=>(openBlock(),createElementBlock("th",{class:normalizeClass("header head_"+me(j(t)))},toDisplayString(de(j(t))),3))),256))])]),createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(E.value,t=>(openBlock(),createElementBlock("tr",{id:"row_"+t.id,key:t.key,class:"list-table-row"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(V.value,m=>(openBlock(),createElementBlock("td",null,[s(j(m,"key"))?(openBlock(),createElementBlock("div",{key:0,class:"actions",innerHTML:b(le(t))},null,8,_hoisted_8$1)):(openBlock(),createElementBlock("span",{key:1,innerHTML:b(re(t,j(m,"key"),m))},null,8,_hoisted_9$1))]))),256))],8,_hoisted_7$1))),128))])])):createCommentVNode("",!0)],64)),createVNode(_sfc_main$x,{ref_key:"deleteBox",ref:r,"data-show-footer":!0,"data-show-modal":!1,onOnClose:x},{title:withCtx(()=>[...d[4]||(d[4]=[createTextVNode("Alert",-1)])]),content:withCtx(()=>[createBaseVNode("span",_hoisted_10$1,toDisplayString(a.current),1)]),footer:withCtx(()=>[createBaseVNode("div",_hoisted_11$1,[createBaseVNode("div",_hoisted_12,[createBaseVNode("div",_hoisted_13,[withDirectives(createBaseVNode("input",{id:"flexCheckDefault","onUpdate:modelValue":d[0]||(d[0]=t=>k.value=t),class:"form-check-input",type:"checkbox",value:""},null,512),[[vModelCheckbox,k.value]]),d[5]||(d[5]=createBaseVNode("label",{class:"form-check-label",for:"flexCheckDefault"}," Don't ask again ",-1))])]),createBaseVNode("div",_hoisted_14,[withDirectives(createBaseVNode("button",{class:"btn btn-default","data-dismiss":"modal",type:"button",onClick:d[1]||(d[1]=t=>x(0))}," No ",512),[[vShow,g.value]]),withDirectives(createBaseVNode("button",{class:"btn btn-primary",type:"button",onClick:d[2]||(d[2]=t=>x(1))}," Yes ",512),[[vShow,g.value]]),withDirectives(createBaseVNode("button",{class:"btn btn-primary",type:"button",onClick:d[3]||(d[3]=t=>U())}," Okay ",512),[[vShow,!g.value]])])])]),_:1},512),createVNode(_sfc_main$q,{ref_key:"infoPopup",ref:i},null,512),_e()?(openBlock(),createElementBlock("div",_hoisted_15,[createBaseVNode("div",_hoisted_16,[createBaseVNode("div",{innerHTML:b(M.value)},null,8,_hoisted_17)])])):createCommentVNode("",!0)],512))}},_hoisted_1$5={role:"tablist",class:"nav nav-tabs flex-nowrap overflow-x-auto no-scrollbar"},_hoisted_2$2=["onClick"],_hoisted_3$2=["href","aria-controls","aria-selected"],_sfc_main$7={__name:"tab-view",props:{dataTabs:{type:[Array,String],required:!0,default:()=>[]},dataActiveTab:{type:[String,Object],default:null},dataBaseUrl:{type:String,default:""}},emits:["tab-change"],setup(w,{emit:e}){const o=w,r=e,i=computed(()=>SafeJsonParse(o.dataTabs,[])),$=computed(()=>o.dataActiveTab),u=computed(()=>o.dataBaseUrl),p=g=>typeof g=="string"?g.replace(/\s/g,"").toLowerCase():g.id||g.label.replace(/\s/g,"").toLowerCase(),n=g=>typeof g=="string"?g:g.label,v=g=>typeof g=="object"&&g.href?g.href:u.value?`${u.value}/${p(g)}`:`#${p(g)}`,S=g=>{const h=p(g),k=$.value?typeof $.value=="string"?$.value.replace(/\s/g,"").toLowerCase():p($.value):null;return h===k},a=g=>{r("tab-change",g),window.location.href=v(g)};return(g,h)=>(openBlock(),createElementBlock("ul",_hoisted_1$5,[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.value,(k,l)=>(openBlock(),createElementBlock("li",{key:l,role:"presentation",class:"nav-item flex-shrink-0",onClick:f=>a(k)},[createBaseVNode("a",{href:v(k),class:normalizeClass(["nav-link whitespace-nowrap",{active:S(k)}]),role:"tab","aria-controls":`panel-${p(k)}`,"aria-selected":S(k)},toDisplayString(n(k)),11,_hoisted_3$2)],8,_hoisted_2$2))),128))]))}},TabView=_export_sfc(_sfc_main$7,[["__scopeId","data-v-fc9cb90b"]]),_sfc_main$6={__name:"copy-paste",props:["dataIgnoreFields","dataPasteElement","dataForm","dataBackUrl","dataCopyPasteAutoInit","dataShowCopy","dataShowPaste"],setup(w){const e=w,o=getCurrentInstance(),r=ref(SafeJsonParse(e.dataIgnoreFields,["id","site_id","backURL","actionPerformed","platform_id","_token","insert_by","update_by"]));ref(e.dataBackUrl||"");const i=ref(e.dataCopyPasteAutoInit===void 0||e.dataCopyPasteAutoInit?.toString()==="true"),$=ref(e.dataShowCopy===void 0||e.dataShowCopy.toString()==="true"),u=ref(e.dataShowPaste===void 0||e.dataShowPaste.toString()==="true"),p=computed(()=>{let h;return typeof e.dataForm<"u"&&document.getElementById(e.dataForm)?h=document.getElementById(e.dataForm):h=document,h}),n=computed(()=>{let h;return typeof e.dataPasteElement>"u"?h=p.value.querySelectorAll("input[type='text']")[0]:h=p.value.getElementById(e.dataPasteElement),h}),v=h=>{const k=p.value;if(h)for(const l in h)try{const f=k[l]||document.getElementById(l),D=h[l];f.type==="checkbox"||f.type==="radio"?f.checked=D:f.value=D}catch{console.info(`unable to set value @ ${l}`)}},S=h=>{PasteFromClipboard().then(k=>{if(IsJson(k)){const l=SafeJsonParse(k,{});v(l)}EventBus.emit("on-paste",k)}).catch(k=>{console.error("unable to paste",k)})},a=()=>{n.value&&n.value.addEventListener("blur",function(){IsJson(this.value)&&S()})},g=()=>{const h=p.value.querySelectorAll("input"),k=p.value.querySelectorAll("textarea"),l=p.value.querySelectorAll("select"),f=[...h,...k,...l],D={},F=C=>r.value.findIndex(M=>C===M);f.forEach(C=>{const M=C.getAttribute("name")||C.getAttribute("id");M!=null&&typeof M!="object"&&F(M)===-1&&(D[M]=C.type==="checkbox"||C.type==="radio"?C.checked:C.value)});const N=JSON.stringify(D);CopyToClipboard(N),EventBus.emit("on-copy",N),Toast.show(o,"Copied...",1e3)};return onMounted(()=>{i.value&&a()}),(h,k)=>(openBlock(),createElementBlock(Fragment,null,[$.value?(openBlock(),createElementBlock("button",{key:0,"aria-label":"Copy",class:"btn btn-outline-secondary",title:"Copy",type:"button",onClick:k[0]||(k[0]=l=>g())},[...k[2]||(k[2]=[createBaseVNode("i",{"aria-hidden":"true",class:"fa fa-copy"},null,-1)])])):createCommentVNode("",!0),u.value?(openBlock(),createElementBlock("button",{key:1,"aria-label":"Paste",class:"btn btn-outline-secondary",title:"Paste",type:"button",onClick:k[1]||(k[1]=l=>S())},[...k[3]||(k[3]=[createBaseVNode("i",{"aria-hidden":"true",class:"fa fa-paste"},null,-1)])])):createCommentVNode("",!0)],64))}},_hoisted_1$4={class:"btn-group"},_sfc_main$5={__name:"left-menu-show-hide",props:["dataIconCss","dataIconCssOff"],setup(w){const e=w,o=ref(!0),r=ref(""),i=ref(e.dataIconCss||"fa fa-arrow-left hand"),$=ref(e.dataIconCssOff||"fa fa-arrow-right hand"),u=()=>{o.value=!o.value,LeftMenu.toggleShow()},p=()=>{r.value=i.value},n=()=>{r.value=$.value},v=()=>{r.value=LeftMenu.isVisible()?i.value:$.value,EventBus.on("left-menu-on-show",p),EventBus.on("left-menu-on-hide",n)};return onMounted(()=>{LeftMenu.init(),v()}),onBeforeUnmount(()=>{EventBus.off("left-menu-on-show",p),EventBus.off("left-menu-on-hide",n)}),(S,a)=>(openBlock(),createElementBlock("div",_hoisted_1$4,[createBaseVNode("span",{onClick:u,class:normalizeClass(r.value)},null,2)]))}},_hoisted_1$3={class:"btn-toolbar justify-content-between border-bottom mb-2 pb-2",role:"toolbar"},_hoisted_2$1={class:"btn-group",role:"group"},_hoisted_3$1={key:0,style:{position:"relative",top:"5px"}},_hoisted_4$1=["innerHTML"],_hoisted_5$1={class:"input-group actionToolbar"},_sfc_main$4={__name:"title-bar",props:["dataTitle","dataBackUrl","dataBackTitle","dataShowCopy","dataShowPaste","dataCopyPasteAutoInit","dataShowExpand"],setup(w){const e=w,o=ref(e.dataTitle),r=ref(e.dataBackUrl),i=ref(typeof e.dataBackTitle>"u"?"Back":e.dataBackTitle),$=computed(()=>typeof e.dataBackUrl<"u"),u=computed(()=>typeof e.dataShowExpand<"u"),p=()=>{window.location.href=r.value};return(n,v)=>(openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$1,[u.value?(openBlock(),createElementBlock("small",_hoisted_3$1,[createVNode(_sfc_main$5,{"data-icon-css":"fa fa-arrow-left hand","data-icon-css-off":"fa fa-arrow-right hand"})])):createCommentVNode("",!0),createBaseVNode("h4",{class:"moduleTitle",innerHTML:o.value},null,8,_hoisted_4$1)]),createBaseVNode("div",_hoisted_5$1,[createVNode(_sfc_main$6,{"data-copy-paste-auto-init":w.dataCopyPasteAutoInit,"data-show-copy":w.dataShowCopy,"data-show-paste":w.dataShowPaste},null,8,["data-copy-paste-auto-init","data-show-copy","data-show-paste"]),$.value?(openBlock(),createElementBlock("button",{key:0,"aria-label":"Back",class:"btn btn-outline-secondary",title:"Back",type:"button",onClick:v[0]||(v[0]=S=>p())},toDisplayString(i.value),1)):createCommentVNode("",!0)])]))}},_hoisted_1$2={class:"navbar navbar-expand-lg bg-light border-bottom"},_hoisted_2={class:"container-fluid"},_hoisted_3={class:"navbar-brand",href:"/",target:"_blank"},_hoisted_4=["src","height"],_hoisted_5={class:"collapse navbar-collapse",id:"navbarScroll"},_hoisted_6={class:"navbar-nav me-auto my-2 my-lg-0 navbar-nav-scroll",style:{"--bs-scroll-height":"100px"}},_hoisted_7={class:"nav-item"},_hoisted_8={class:"d-flex"},_hoisted_9={class:"text-success"},_hoisted_10={class:"navbar-nav me-auto my-2 my-lg-0 navbar-nav-scroll ms-1",style:{"--bs-scroll-height":"100px"}},_hoisted_11={class:"nav-item"},_sfc_main$3={__name:"top-nav",props:["dataUsername","dataSiteName","dataCurrentSite","dataSupportedSites","dataIsAdmin","dataSiteCombo","dataLogo","dataLogoHeight"],setup(w){const e=w,o=ref(e.dataSiteName||"hashtagcms.org"),r=ref(e.dataUsername);ref(!!(e.dataUsername&&e.dataUsername!=="")),ref(!(typeof e.dataSiteCombo>"u"||e.dataSiteCombo==="false"));const i=ref(typeof e.dataLogoHeight>"u"||e.dataLogoHeight===""?50:e.dataLogoHeight),$=computed(()=>typeof e.dataLogo<"u"&&e.dataLogo!==""?e.dataLogo:adminConfig.admin_asset("img/logo-transparent.png")),u=()=>{document.getElementById("logout-form").submit()};return(p,n)=>(openBlock(),createElementBlock("nav",_hoisted_1$2,[createBaseVNode("div",_hoisted_2,[createBaseVNode("a",_hoisted_3,[createBaseVNode("img",{class:"cms-logo",src:$.value,height:i.value},null,8,_hoisted_4),createTextVNode(" "+toDisplayString(o.value),1)]),n[1]||(n[1]=createBaseVNode("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarScroll","aria-controls":"navbarScroll","aria-expanded":"false","aria-label":"Toggle navigation"},[createBaseVNode("span",{class:"navbar-toggler-icon"})],-1)),createBaseVNode("div",_hoisted_5,[createBaseVNode("ul",_hoisted_6,[createBaseVNode("li",_hoisted_7,[createVNode(_sfc_main$r,{"data-current-site":w.dataCurrentSite,"data-supported-sites":w.dataSupportedSites,"data-is-admin":w.dataIsAdmin},null,8,["data-current-site","data-supported-sites","data-is-admin"])])]),createBaseVNode("div",_hoisted_8,[n[0]||(n[0]=createTextVNode(" Welcome  ",-1)),createBaseVNode("span",_hoisted_9,toDisplayString(r.value)+"!",1),createBaseVNode("ul",_hoisted_10,[createBaseVNode("li",_hoisted_11,[createBaseVNode("a",{href:"/logout",onClick:withModifiers(u,["prevent"])},"Logout")])])])])])]))}},_hoisted_1$1=["innerHTML"],_sfc_main$2={__name:"loader",props:["dataLoadingText","dataAsModal"],setup(w,{expose:e}){const o=w,r=ref(null),i=ref(null),$=ref(o.dataLoadingText===void 0?"Loading. Please wait...":o.dataLoadingText),u=ref(o.dataAsModal===void 0||o.dataAsModal===!0),p=ref(!1),n=()=>{let g=0,h=0;return typeof window.innerWidth=="number"?(g=window.innerWidth,h=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(g=document.documentElement.clientWidth,h=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(g=document.body.clientWidth,h=document.body.clientHeight),{width:g,height:h}},v=(g=null)=>{const h=n();r.value&&(r.value.style.width=`${h.width}px`,r.value.style.height=`${h.height}px`),i.value&&g!==null&&(g.left&&(i.value.style.left=`${g.left}px`),g.top&&(i.value.style.top=`${g.top}px`),g.right&&(i.value.style.top=`${g.right}px`))};return e({show:(g=null,h=null)=>{p.value=!0,typeof g=="string"&&($.value=g),v(h)},hide:()=>{p.value=!1}}),onMounted(()=>{v()}),(g,h)=>withDirectives((openBlock(),createElementBlock("div",null,[withDirectives(createBaseVNode("div",{class:"loaderModal",ref_key:"loaderModal",ref:r},null,512),[[vShow,u.value]]),createBaseVNode("div",{class:"loaderPanel",ref_key:"loaderSpinner",ref:i},[h[0]||(h[0]=createStaticVNode('<div class="spinner"><svg viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg"><circle class="length" fill="none" stroke-width="8" stroke-linecap="round" cx="33" cy="33" r="28"></circle></svg><svg viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg"><circle fill="none" stroke-width="8" stroke-linecap="round" cx="33" cy="33" r="28"></circle></svg><svg viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg"><circle fill="none" stroke-width="8" stroke-linecap="round" cx="33" cy="33" r="28"></circle></svg><svg viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg"><circle fill="none" stroke-width="8" stroke-linecap="round" cx="33" cy="33" r="28"></circle></svg></div>',1)),createBaseVNode("span",{class:"loaderText",innerHTML:$.value},null,8,_hoisted_1$1)],512)],512)),[[vShow,p.value]])}},_sfc_main$1={__name:"timer-button",props:["dataBackUrl","dataTimeout"],setup(w){const e=w,o=ref(e.dataTimeout===void 0?5:parseInt(e.dataTimeout)),r=ref(0),i=ref(0),$=ref("Seconds"),u=()=>{clearInterval(i.value),window.location.href=e.dataBackUrl},p=()=>{r.value>=o.value?(clearInterval(i.value),u()):r.value++,$.value=o.value-r.value<=1?"Second":"Seconds"};return onMounted(()=>{i.value=setInterval(p,1e3)}),onBeforeUnmount(()=>{clearInterval(i.value)}),(n,v)=>(openBlock(),createElementBlock("a",{href:"#",onClick:v[0]||(v[0]=S=>u()),class:"btn btn-outline-secondary"},[renderSlot(n.$slots,"default",{},()=>[v[1]||(v[1]=createTextVNode("Back in ",-1))]),createBaseVNode("span",null,toDisplayString(o.value-r.value)+" "+toDisplayString($.value),1)]))}},_hoisted_1={class:"toasterContent"},_sfc_main={__name:"toast-box",setup(w,{expose:e}){const o=ref(!1),r=ref("Toast Content"),i=ref(0),$=ref(null),u=v=>{if(!$.value)return;const S=v!==void 0?v.left:window.innerWidth/2-$.value.offsetWidth/2,a=v!==void 0?v.top:window.innerHeight/2-$.value.offsetHeight/2+window.scrollY;$.value.style.top=`${a}px`,$.value.style.left=`${S}px`},p=()=>{o.value=!1,i.value&&clearTimeout(i.value)};return e({show:(v="",S=3e3,a)=>{p(),o.value=!0,r.value=v!==""?v:"",nextTick(()=>{u(a)}),i.value=setTimeout(()=>{p()},S)},hide:p}),onBeforeUnmount(()=>{p()}),(v,S)=>withDirectives((openBlock(),createElementBlock("div",{class:"toasterHolder jsToast shadow",ref_key:"toastElement",ref:$},[createBaseVNode("div",_hoisted_1,toDisplayString(r.value),1)],512)),[[vShow,o.value]])}},HashtagCmsAdminUI={VERSION:"1.4.0",ActionBar:_sfc_main$y,CategoryPlatform:_sfc_main$w,CategorySettings:_sfc_main$v,CmsModuleDropdown:_sfc_main$B,DownloadButton:_sfc_main$u,FileUploader:_sfc_main$t,FrontendModuleCreator:_sfc_main$s,GlobalSiteButton:_sfc_main$r,Homepage:_sfc_main$p,HtmlSlot:_sfc_main$o,ImageGallery:_sfc_main$n,InfoBoxes:_sfc_main$l,InfoPopup:_sfc_main$q,LanguageButton:_sfc_main$A,LanguageCopier:_sfc_main$k,LeftNav:_sfc_main$j,MenuSorter:_sfc_main$i,ModuleCreator:_sfc_main$h,ModulePermission:_sfc_main$g,Pagination:_sfc_main$f,PlatformButton:_sfc_main$e,SearchBar:_sfc_main$z,SiteButton:_sfc_main$d,SiteCloner:_sfc_main$c,SitewiseCopier:_sfc_main$a,SitewiseData:_sfc_main$b,Sorter:_sfc_main$9,TabularView:_sfc_main$8,TabView,TitleBar:_sfc_main$4,TopNav:_sfc_main$3,CopyPaste:_sfc_main$6,InfoBox:_sfc_main$m,LeftMenuShowHide:_sfc_main$5,Loader:_sfc_main$2,ModalBox:_sfc_main$x,SplitButton:_sfc_main$C,TimerButton:_sfc_main$1,ToastBox:_sfc_main,AdminConfig,...common,Dashboard,EditorHelper,PageManager,ErrorMessage,MapAPI,Form};typeof window<"u"&&(window.HashtagCmsAdminUI=HashtagCmsAdminUI);export{_sfc_main$y as ActionBar,AdminConfig,_sfc_main$w as CategoryPlatform,_sfc_main$v as CategorySettings,Je as CleanForUrl,_sfc_main$B as CmsModuleDropdown,_sfc_main$6 as CopyPaste,CopyToClipboard,Dashboard,_sfc_main$u as DownloadButton,EditorHelper,ErrorMessage,Oe as Fetcher,_sfc_main$t as FileUploader,Form,_sfc_main$s as FrontendModuleCreator,_sfc_main$r as GlobalSiteButton,_sfc_main$p as Homepage,_sfc_main$o as HtmlSlot,_sfc_main$n as ImageGallery,_sfc_main$m as InfoBox,_sfc_main$l as InfoBoxes,_sfc_main$q as InfoPopup,IsJson,_sfc_main$A as LanguageButton,_sfc_main$k as LanguageCopier,LeftMenu,_sfc_main$5 as LeftMenuShowHide,_sfc_main$j as LeftNav,_sfc_main$2 as Loader,MapAPI,_sfc_main$i as MenuSorter,Modal,_sfc_main$x as ModalBox,_sfc_main$h as ModuleCreator,_sfc_main$g as ModulePermission,PageManager,_sfc_main$f as Pagination,PasteFromClipboard,_sfc_main$e as PlatformButton,QueryBuilder,SafeErrorData,SafeJsonParse,_sfc_main$z as SearchBar,_sfc_main$d as SiteButton,_sfc_main$c as SiteCloner,_sfc_main$a as SitewiseCopier,_sfc_main$b as SitewiseData,_sfc_main$9 as Sorter,_sfc_main$C as SplitButton,qe as Storage,Store,TabView,_sfc_main$8 as TabularView,_sfc_main$1 as TimerButton,_sfc_main$4 as TitleBar,Re as TitleCase,Toast,_sfc_main as ToastBox,_sfc_main$3 as TopNav,ze as Utils,HashtagCmsAdminUI as default};
